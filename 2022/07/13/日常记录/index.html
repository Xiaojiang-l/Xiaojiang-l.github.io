<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="晓江"><meta name="copyright" content="晓江"><meta name="generator" content="Hexo 5.0.0"><meta name="theme" content="hexo-theme-yun"><title>日常记录 | 云端小站</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="none" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.16/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_stqaphw3j4.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script><!-- hexo-inject:begin --><!-- hexo-inject:end -->const a = 1;
document.addEventListener("DOMContentLoaded", () => {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
});
</script><link class="aplayer-style-marker" rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script class="aplayer-script-marker" src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/pjax@latest/pjax.min.js" defer></script><script src="/js/pjax.js" defer></script><link rel="shortcut icon" type="image/svg+xml" href="/icon.jpg"><link rel="mask-icon" href="/icon.jpg" color="#0078E7"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="stylesheet" href="/css/hexo-theme-yun.css"><link rel="alternate" href="/atom.xml" title="云端小站" type="application/atom+xml"><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"root":"/","title":"云端小站","version":"0.9.4","anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"local_search":{"path":"/search.xml"}};
  </script><meta name="description" content="实习过程中的笔记和经验">
<meta property="og:type" content="article">
<meta property="og:title" content="日常记录">
<meta property="og:url" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/index.html">
<meta property="og:site_name" content="云端小站">
<meta property="og:description" content="实习过程中的笔记和经验">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210722094509062.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210722094611758.png">
<meta property="og:image" content="https://images.gitee.com/uploads/images/2018/0814/170141_5aa5bc98_551147.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210816160048468.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210727160922150.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210803160420009.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210803160445784.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210803160603377.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/70.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/v2-7293bde8559e8496684637d18a29c813_720w.jpg">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211215193945509.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211220145751916.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211220150052185.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20220105100646179.png">
<meta property="og:image" content="https://cn.vuejs.org/images/lifecycle.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211018170824438.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211018171023096.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211018171135474.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211018171616013.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211018172004596.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211018172151099.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/format,png.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/文档/笔记/个人文件/日常记录.assets/format,png.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211130163019178.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211130163131989.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211130163425803.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211130163543089.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210818175143017.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210923091031868.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210923102931778.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210923094809049.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210923094840861.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210923103246450.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210923103333327.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210929094044130.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211215113618378.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210929221029563.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211111101446650.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211111101912849.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211111103020505.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/b4d7961b-a08c-4546-9510-b071738c6681.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/a331515a-a1d5-4b55-8a46-74f9dd1b282f.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211222092944562.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20220111112224137.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/basic-rebase-3-16346248957246.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211019143406795.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211019144012224.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211019143814095.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211019180441524.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211019181012413.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211019181240032.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211019181400986.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/git.jpg">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/2019110519521430.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/basic-rebase-2.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/basic-rebase-3-16347147892832.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/bg2020042723.jpg">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211108104635749.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/847101-20180413160038726-1532655002.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210917223049380.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210917222942683.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210917223036427.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211110162503414.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211110153343367.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211110153815689.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211110153923334.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211110153956739.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211216151854684.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211216151921796.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211221161009666.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211221161043663.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211221161100951.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20220120095305181.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20220120095610819.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20220120100412980.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20220120100525968.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20220120111529955.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20220120111651388.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/persion/日常记录.assets/image-20220418161417690.png">
<meta property="og:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/098a822f-a2f2-48a0-bcc3-00e393958c9d.png">
<meta property="article:published_time" content="2022-07-13T14:49:06.000Z">
<meta property="article:modified_time" content="2022-07-13T14:57:40.679Z">
<meta property="article:author" content="晓江">
<meta property="article:tag" content="笔记">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210722094509062.png"><script src="/js/ui/mode.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end --><link rel="stylesheet" href="/css/prism.css" type="text/css"></head><body><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script defer src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="文章目录"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info mickey-mouse"><a class="site-author-avatar" href="/about/" title="晓江"><img width="96" loading="lazy" src="/icon.jpg" alt="晓江"></a><div class="site-author-name"><a href="/about/">晓江</a></div><a class="site-name" href="/about/site.html">云端小站</a><sub class="site-subtitle"></sub><div class="site-desciption"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="首页"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">53</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">18</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">55</span></a></div><a class="site-state-item hty-icon-button" href="https://lxjblog.gitee.io/myblog" title="文档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-clipboard-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="/wechat/" title="微信" target="_blank" style="color:#1AAD19"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-2-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="http://wpa.qq.com/msgrd?v=3&amp;uin=1256240778&amp;site=qq&amp;menu=yes" title="QQ" target="_blank" style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/Xiaojiang-l" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/playlist?id=5157675042" title="网易云音乐" target="_blank" style="color:#C20C0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:1256240778@qq.com" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98"><span class="toc-text">1、日常问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E8%B0%83%E6%95%B4%E6%A1%8C%E9%9D%A2%E5%9B%BE%E6%A0%87%E9%97%B4%E8%B7%9D"><span class="toc-text">1、调整桌面图标间距</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81gitee%E7%94%9F%E6%88%90%E5%85%AC%E9%92%A5"><span class="toc-text">2、gitee生成公钥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-text">3、配置环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E2%80%99javac%E2%80%99-%E4%B8%8D%E6%98%AF%E5%86%85%E9%83%A8%E6%88%96%E5%A4%96%E9%83%A8%E5%91%BD%E4%BB%A4-%E4%B9%9F%E4%B8%8D%E6%98%AF%E5%8F%AF%E8%BF%90%E8%A1%8C%E7%9A%84%E7%A8%8B%E5%BA%8F"><span class="toc-text">4、’javac’ 不是内部或外部命令,也不是可运行的程序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E7%AC%94%E8%AE%B0"><span class="toc-text">2、笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%90%8E%E7%AB%AF%E5%86%85%E5%AE%B9"><span class="toc-text">1、后端内容</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E6%B3%A8%E8%A7%A3%E7%9A%84%E8%AF%B4%E6%98%8E"><span class="toc-text">1、注解的说明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81Collector%E5%92%8CCollectors"><span class="toc-text">2、Collector和Collectors</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E5%A4%8D%E5%88%B6%E5%AF%B9%E8%B1%A1%E5%86%85%E5%AE%B9"><span class="toc-text">3、复制对象内容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81Java%E4%BB%A3%E7%A0%81%E6%B3%A8%E9%87%8ATODO-FIXME-XXX%E7%9A%84%E6%84%8F%E4%B9%89"><span class="toc-text">4、Java代码注释TODO FIXME XXX的意义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%E3%80%81sql%E4%BC%98%E5%8C%96%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-text">6、sql优化的几种方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%E3%80%81update%E6%9B%B4%E6%96%B0%E4%B8%A4%E4%B8%AA%E8%A1%A8%E6%A0%BC%E5%86%85%E5%AE%B9"><span class="toc-text">7、update更新两个表格内容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-text">8、自定义拦截器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9%E3%80%81Java%E4%B8%AD-%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">9、Java中 :: 的作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10%E3%80%81%E5%8C%B9%E9%85%8Dmap%E7%9A%84%E9%94%AE"><span class="toc-text">10、匹配map的键</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11%E3%80%81Hutool-%E8%AF%BB%E5%8F%96Excel%E6%96%87%E4%BB%B6"><span class="toc-text">11、Hutool 读取Excel文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12%E3%80%81Stream-%E6%B5%81%E7%9A%84%E7%94%A8%E6%B3%95"><span class="toc-text">12、Stream()流的用法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13%E3%80%81%E6%A0%B9%E6%8D%AE%E6%96%87%E4%BB%B6%E5%90%8D%E8%8E%B7%E5%8F%96%E8%BE%93%E5%85%A5%E6%B5%81"><span class="toc-text">13、根据文件名获取输入流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14%E3%80%81%E5%B0%86%E8%BE%93%E5%85%A5%E6%B5%81%E8%BD%AC%E4%B8%BA%E5%AD%97%E8%8A%82%E6%95%B0%E7%BB%84"><span class="toc-text">14、将输入流转为字节数组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15%E3%80%81%E8%BF%9B%E8%A1%8CMap%E8%A1%A8%E6%A0%BC%E6%98%A0%E5%B0%84%E5%B9%B6%E8%BD%AC%E4%B8%BABean"><span class="toc-text">15、进行Map表格映射并转为Bean</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#16%E3%80%81%E5%88%9B%E5%BB%BAAPI%E6%96%87%E6%A1%A3%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-text">16、创建API文档的方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17%E3%80%81%E8%BE%93%E5%87%BA%E6%97%A5%E5%BF%97%E4%BF%A1%E6%81%AF"><span class="toc-text">17、输出日志信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#18%E3%80%81%E8%8E%B7%E5%8F%96%E5%BD%93%E5%A4%A9%E6%97%B6%E9%97%B4"><span class="toc-text">18、获取当天时间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#19%E3%80%81%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E7%99%BB%E5%BD%95%E7%9A%84%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF"><span class="toc-text">19、获取当前登录的用户信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#20%E3%80%81%E5%A2%9E%E5%8A%A0%E4%BA%8B%E5%8A%A1%E5%9B%9E%E6%BB%9A"><span class="toc-text">20、增加事务回滚</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#21%E3%80%81%E6%8B%BC%E6%8E%A5%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">21、拼接字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#22%E3%80%81%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8"><span class="toc-text">22、抛出异常</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#23%E3%80%81Wrappers%E7%9A%84%E9%93%BE%E5%BC%8F%E4%BD%BF%E7%94%A8"><span class="toc-text">23、Wrappers的链式使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#24%E3%80%81%E4%BF%AE%E6%94%B9%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F"><span class="toc-text">24、修改日期格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#25%E3%80%81%E6%95%B0%E5%80%BC%E5%B7%A5%E5%85%B7%E7%B1%BBNumberUtils"><span class="toc-text">25、数值工具类NumberUtils</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#26%E3%80%81Collectors-groupingBy%E5%88%86%E7%BB%84%E9%A1%BA%E5%BA%8F%E9%94%99%E8%AF%AF"><span class="toc-text">26、Collectors.groupingBy分组顺序错误</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#27%E3%80%81%E6%97%A5%E5%BF%97TraceId"><span class="toc-text">27、日志TraceId</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#28%E3%80%81SpringBoot%E7%9A%84AOP"><span class="toc-text">28、SpringBoot的AOP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#29%E3%80%81Logback%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">29、Logback的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#30%E3%80%81%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB"><span class="toc-text">30、日志级别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#31%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E6%97%A5%E5%BF%97%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-text">31、自定义日志过滤器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#32%E3%80%81%E8%AF%B7%E6%B1%82%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-text">32、请求拦截器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#33%E3%80%81%E6%90%9C%E7%B4%A2%E7%BD%91%E7%AB%99%E7%9A%84%E5%86%85%E5%AE%B9"><span class="toc-text">33、搜索网站的内容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#34%E3%80%81%E6%B3%A8%E8%A7%A3service%E5%92%8Ccomponent%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">34、注解service和component的区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#35%E3%80%81SpringBoot%E4%BA%8B%E4%BB%B6%E5%8F%91%E5%B8%83%E4%B8%8E%E7%9B%91%E5%90%AC"><span class="toc-text">35、SpringBoot事件发布与监听</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#36%E3%80%81Java%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">36、Java使用正则表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#37%E3%80%81%E6%9E%9A%E4%B8%BE%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">37、枚举的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#38%E3%80%81%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%E5%90%8E%E5%B0%86%E5%AF%B9%E8%B1%A1%E5%B0%81%E8%A3%85%E4%B8%BAvo"><span class="toc-text">38、分页查询后将对象封装为vo</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#39%E3%80%81LocalDate%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-text">39、LocalDate格式化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#40%E3%80%81Java%E8%AF%B7%E6%B1%82"><span class="toc-text">40、Java请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#41%E3%80%81%E8%8E%B7%E5%8F%96%E6%9C%88%E5%88%9D%E6%88%96%E8%80%85%E6%9C%88%E6%9C%AB"><span class="toc-text">41、获取月初或者月末</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%89%8D%E7%AB%AF%E5%86%85%E5%AE%B9"><span class="toc-text">2、前端内容</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81SCSS%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%86%85%E5%AE%B9"><span class="toc-text">1、SCSS的基本内容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E5%88%87%E6%8D%A2%E5%88%86%E6%94%AF"><span class="toc-text">2、切换分支</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81Vue%E7%9A%848%E4%B8%AA%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0"><span class="toc-text">3、Vue的8个钩子函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81Vue%E4%BF%AE%E6%94%B9%E5%BC%95%E7%94%A8%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7%E5%80%BC"><span class="toc-text">4、Vue修改引用对象的属性值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81Chrome%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AE%89%E8%A3%85Vue%E6%8F%92%E4%BB%B6"><span class="toc-text">5、Chrome浏览器安装Vue插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%E3%80%811-0-9-%E4%B8%8D%E7%AD%89%E4%BA%8E-0-1-%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">6、1 - 0.9 不等于 0.1 的问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%E3%80%81%E5%AE%89%E8%A3%85%E6%B7%98%E5%AE%9D%E9%95%9C%E5%83%8Fcnpm"><span class="toc-text">7、安装淘宝镜像cnpm</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8%E3%80%81%E4%BD%BF%E7%94%A8npm%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6"><span class="toc-text">8、使用npm删除文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9%E3%80%81%E9%94%99%E8%AF%AF%E6%94%B6%E9%9B%86"><span class="toc-text">9、错误收集</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10%E3%80%81Vue%E7%88%B6%E7%BB%84%E4%BB%B6%E8%B0%83%E7%94%A8%E5%AD%90%E7%BB%84%E4%BB%B6%E6%96%B9%E6%B3%95"><span class="toc-text">10、Vue父组件调用子组件方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11%E3%80%81ajax%E8%AE%BE%E7%BD%AE%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-text">11、ajax设置请求头</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12%E3%80%81vue%E7%9A%84change%E4%BA%8B%E4%BB%B6%E6%90%BA%E5%B8%A6%E5%8F%82%E6%95%B0"><span class="toc-text">12、vue的change事件携带参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13%E3%80%81vuex%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82"><span class="toc-text">13、vuex发送请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14%E3%80%81%E6%95%B0%E5%80%BC%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-text">14、数值格式化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15%E3%80%81vscode%E8%AF%86%E5%88%AB%E4%B8%8D%E5%88%B0npm"><span class="toc-text">15、vscode识别不到npm</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#16%E3%80%81node-sass-%E5%AE%89%E8%A3%85%E5%A4%B1%E8%B4%A5"><span class="toc-text">16、node-sass 安装失败</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E8%BF%90%E7%BB%B4%E5%86%85%E5%AE%B9"><span class="toc-text">3、运维内容</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90"><span class="toc-text">1、修改文件权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E4%BD%BF%E7%94%A8Nginx%E9%85%8D%E7%BD%AE%E8%AF%81%E4%B9%A6"><span class="toc-text">2、使用Nginx配置证书</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E6%8B%B7%E8%B4%9D%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-text">3、拷贝文件夹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E6%96%B0%E7%9A%84%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-text">4、新的测试环境搭建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81windows%E6%80%8E%E4%B9%88%E5%85%B3%E9%97%AD%E6%8C%87%E5%AE%9A%E7%AB%AF%E5%8F%A3%E6%9C%8D%E5%8A%A1"><span class="toc-text">5、windows怎么关闭指定端口服务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%E3%80%81%E6%9F%A5%E8%AF%A2%E6%96%87%E4%BB%B6%E4%BD%8D%E7%BD%AE"><span class="toc-text">6、查询文件位置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%E3%80%81nginx%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-text">7、nginx配置环境变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8%E3%80%81%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5"><span class="toc-text">8、查看端口使用情况</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9%E3%80%81%E9%85%8D%E7%BD%AE%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-text">9、配置服务器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81Git%E7%9B%B8%E5%85%B3"><span class="toc-text">4、Git相关</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81git%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E5%90%8D"><span class="toc-text">1、git修改用户名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81git-rebase%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">2、git rebase的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81git%E4%BF%AE%E6%94%B9%E6%B3%A8%E9%87%8A%E5%86%85%E5%AE%B9"><span class="toc-text">3、git修改注释内容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81git-push"><span class="toc-text">4、git push</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81git-pull"><span class="toc-text">5、git pull</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%E3%80%81git-fetch"><span class="toc-text">6、git fetch</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%E3%80%81git-revert"><span class="toc-text">7、git revert</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8%E3%80%81git-reset"><span class="toc-text">8、git reset</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9%E3%80%81git-%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86"><span class="toc-text">9、git 分支管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10%E3%80%81merge-%E5%92%8C-rebase-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">10、merge 和 rebase 的区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11%E3%80%81git-cherry-pick"><span class="toc-text">11、git cherry-pick</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12%E3%80%81git-stash"><span class="toc-text">12、git stash</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13%E3%80%81git-reflog"><span class="toc-text">13、git reflog</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14%E3%80%81origin"><span class="toc-text">14、origin</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15%E3%80%81%E5%BC%BA%E5%88%B6%E6%8B%89%E5%8F%96"><span class="toc-text">15、强制拉取</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="toc-text">5、数据库操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2join"><span class="toc-text">1、连接查询join</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E5%88%86%E7%BB%84group-by"><span class="toc-text">2、分组group by</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E7%BB%84%E5%90%88%E6%9F%A5%E8%AF%A2union"><span class="toc-text">3、组合查询union</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E8%81%94%E8%A1%A8%E5%88%A0%E9%99%A4"><span class="toc-text">4、联表删除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81%E6%9F%A5%E8%AF%A2%E6%8F%92%E5%85%A5"><span class="toc-text">5、查询插入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%E3%80%81%E8%A1%8C%E9%94%81for-update"><span class="toc-text">6、行锁for update</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%E3%80%81%E4%BA%8B%E5%8A%A1"><span class="toc-text">7、事务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8%E3%80%81%E7%B4%A2%E5%BC%95INDEX"><span class="toc-text">8、索引INDEX</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9%E3%80%81on-duplicate-key-update"><span class="toc-text">9、on duplicate key update</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81Maven%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4"><span class="toc-text">6、Maven基本指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81pm2%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4"><span class="toc-text">7、pm2常用指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8%E3%80%81Linux%E7%9B%B8%E5%85%B3"><span class="toc-text">8、Linux相关</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-text">1、创建文件夹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6"><span class="toc-text">2、删除文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E5%88%9B%E5%BB%BASSH%E7%99%BB%E5%BD%95%E8%AF%81%E4%B9%A6"><span class="toc-text">3、创建SSH登录证书</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81less%E7%9B%B8%E5%85%B3"><span class="toc-text">4、less相关</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81%E6%9F%A5%E7%9C%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%98%AF%E5%A4%9A%E5%B0%91%E4%BD%8D%E7%9A%84"><span class="toc-text">5、查看服务器是多少位的</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%E3%80%81%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE%E8%92%B2%E5%85%AC%E8%8B%B1"><span class="toc-text">6、服务器配置蒲公英</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%E3%80%81%E4%BF%AE%E6%94%B9Linux%E6%A0%B7%E5%BC%8F"><span class="toc-text">7、修改Linux样式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8%E3%80%81%E5%AE%89%E8%A3%85Nginx"><span class="toc-text">8、安装Nginx</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9%E3%80%81%E5%AE%89%E8%A3%85Redis"><span class="toc-text">9、安装Redis</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10%E3%80%81echo%E5%91%BD%E4%BB%A4"><span class="toc-text">10、echo命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11%E3%80%81LogStash%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-text">11、LogStash的安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12%E3%80%81LogStash%E7%9B%91%E5%90%AC%E6%97%A5%E5%BF%97"><span class="toc-text">12、LogStash监听日志</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13%E3%80%81-LogStash-Filter%E6%8F%92%E4%BB%B6"><span class="toc-text">13、 LogStash Filter插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14%E3%80%81LogStash%E9%85%8D%E7%BD%AE"><span class="toc-text">14、LogStash配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15%E3%80%81%E8%A7%A3%E5%8E%8B%E7%BC%A9"><span class="toc-text">15、解压缩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#16%E3%80%81%E5%85%B3%E9%97%ADKibana"><span class="toc-text">16、关闭Kibana</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17%E3%80%81Nginx%E9%85%8D%E7%BD%AE%E9%BB%98%E8%AE%A4%E5%93%8D%E5%BA%94"><span class="toc-text">17、Nginx配置默认响应</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#18%E3%80%81find%E6%9F%A5%E6%89%BE%E6%96%87%E4%BB%B6"><span class="toc-text">18、find查找文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#19%E3%80%81crontab%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1"><span class="toc-text">19、crontab定时任务</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9%E3%80%81%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">9、开发工具的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81IDEA"><span class="toc-text">1、IDEA</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81VsCode"><span class="toc-text">2、VsCode</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10%E3%80%81Python%E7%AC%94%E8%AE%B0"><span class="toc-text">10、Python笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%9B%BE%E7%89%87%E8%BD%AC%E6%88%90Base64"><span class="toc-text">1、图片转成Base64</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E8%AF%BB%E5%8F%96yml%E6%96%87%E4%BB%B6"><span class="toc-text">2、读取yml文件</span></a></li></ol></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="晓江"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="云端小站"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">日常记录</h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="创建时间：2022-07-13 22:49:06" itemprop="dateCreated datePublished" datetime="2022-07-13T22:49:06+08:00">2022-07-13</time></div><span class="post-busuanzi"><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读次数"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-eye-line"></use></svg> <span id="busuanzi_value_page_pv"></span></span></span><div class="post-classify"><span class="post-category"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category" href="/categories/%E7%AC%94%E8%AE%B0/" style="--text-color:dimgray" itemprop="url" rel="index"><span itemprop="text">笔记</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag" href="/tags/%E7%AC%94%E8%AE%B0/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">笔记</span></a></span></div><div class="post-author"><div class="author-avatar"><img src="https://lxjblog.gitee.io/icon.jpg"></div><span class="author-name">晓江</span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#0078E7;"><h2 id="1、日常问题"><a href="#1、日常问题" class="headerlink" title="1、日常问题"></a>1、日常问题</h2><h3 id="1、调整桌面图标间距"><a href="#1、调整桌面图标间距" class="headerlink" title="1、调整桌面图标间距"></a>1、调整桌面图标间距</h3><ol>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><li><p>按 ctrl + r ，然后输入regedit， 打开注册表</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210722094509062.png" alt="image-20210722094509062" loading="lazy"></p>
</li>
<li><p>分别双击调整水平和垂直间距</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210722094611758.png" alt="image-20210722094611758" loading="lazy"></p>
</li>
<li><p>然后完成之后重启电脑，重新加载注册表才可以看到调整后的效果</p>
</li>
</ol>
<h3 id="2、gitee生成公钥"><a href="#2、gitee生成公钥" class="headerlink" title="2、gitee生成公钥"></a>2、gitee生成公钥</h3><ol>
<li><p>在git窗口输入指令</p>
<pre class=" language-bash"><code class="language-bash">ssh-keygen</code></pre>
</li>
<li><p>然后按三下回车即可</p>
<p><img src="https://images.gitee.com/uploads/images/2018/0814/170141_5aa5bc98_551147.png" alt="img" loading="lazy"></p>
</li>
<li><p>然后进入对应的文件中查看公钥</p>
<pre class=" language-bash"><code class="language-bash">C:\Users\12562\.ssh</code></pre>
</li>
</ol>
<h3 id="3、配置环境变量"><a href="#3、配置环境变量" class="headerlink" title="3、配置环境变量"></a>3、配置环境变量</h3><blockquote>
<p>  Java环境</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash">JAVA_HOME
C:\Program Files\Java\jdk1.8.0_301

Path
<span class="token keyword">.</span><span class="token punctuation">;</span>%JAVA_HOME%\bin<span class="token punctuation">;</span>%JAVA_HOME%\jre\bin</code></pre>
<blockquote>
<p>  Maven环境</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash">M2_HOME
D:\Program Files\Maven\apache-maven-3.8.1-bin\apache-maven-3.8.1\bin

MAVEN_HOME
D:\Program Files\Maven\apache-maven-3.8.1-bin\apache-maven-3.8.1

Path
%MAVEN_HOME%\bin</code></pre>
<h3 id="4、’javac’-不是内部或外部命令-也不是可运行的程序"><a href="#4、’javac’-不是内部或外部命令-也不是可运行的程序" class="headerlink" title="4、’javac’ 不是内部或外部命令,也不是可运行的程序"></a>4、’javac’ 不是内部或外部命令,也不是可运行的程序</h3><blockquote>
<p>  修改环境变量 Path</p>
</blockquote>
<pre class=" language-java"><code class="language-java"><span class="token operator">%</span>JAVA_HOME<span class="token operator">%</span>\bin\
<span class="token operator">%</span>JAVA_HOME<span class="token operator">%</span>\jre\bin\</code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210816160048468.png" alt="image-20210816160048468" loading="lazy"></p>
<h2 id="2、笔记"><a href="#2、笔记" class="headerlink" title="2、笔记"></a>2、笔记</h2><h3 id="1、后端内容"><a href="#1、后端内容" class="headerlink" title="1、后端内容"></a>1、后端内容</h3><h4 id="1、注解的说明"><a href="#1、注解的说明" class="headerlink" title="1、注解的说明"></a>1、注解的说明</h4><blockquote>
<p>  @Repository的作用</p>
</blockquote>
<ul>
<li>@Repository、@Service、@Controller 和 @Component 将类标识为Bean</li>
<li>它用于将数据访问层 (DAO 层 ) 的类标识为 Spring Bean。具体只需将该注解标注在 DAO类上即可。同时，为了让 Spring 能够扫描类路径中的类并识别出 @Repository 注解</li>
</ul>
<blockquote>
<p>  @component的作用</p>
</blockquote>
<p><strong>作用：</strong>例如我在实现类中用到了@Autowired注解，被注解的这个类是从Spring容器中取出来的，那调用的实现类也需要被Spring容器管理，加上@Component</p>
<p><strong>和@Bean的区别：</strong></p>
<ul>
<li><p>@Component注解表明一个类会作为组件类，并告知Spring要为这个类创建bean</p>
</li>
<li><p>@Bean注解告诉Spring这个方法将会返回一个对象，这个对象要注册为Spring应用上下文中的bean。通常方法体中包含了最终产生bean实例的逻辑</p>
</li>
<li><p>两者的目的是一样的，都是注册bean到Spring容器中</p>
</li>
</ul>
<h4 id="2、Collector和Collectors"><a href="#2、Collector和Collectors" class="headerlink" title="2、Collector和Collectors"></a>2、Collector和Collectors</h4><blockquote>
<p>  示例</p>
</blockquote>
<pre class=" language-java"><code class="language-java">List<span class="token operator">&lt;</span>PositionConnect<span class="token operator">></span> positionConnect <span class="token operator">=</span> produceBiz<span class="token punctuation">.</span><span class="token function">getPositionConnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>e <span class="token operator">-</span><span class="token operator">></span> e<span class="token punctuation">.</span><span class="token function">getLocationCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>locationCode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<ul>
<li>Collector是专门用来作为Stream的collect方法的参数的</li>
<li>而Collectors是作为生产具体Collector的工具类</li>
<li>Collection的集合子类可以使用 <code>stream().filter(flag).collect(Collectors.toList())</code>通过设置 flag 条件进行内容过滤</li>
</ul>
<p>参考文章：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/7eaa0969b424">https://www.jianshu.com/p/7eaa0969b424</a></p>
<h4 id="3、复制对象内容"><a href="#3、复制对象内容" class="headerlink" title="3、复制对象内容"></a>3、复制对象内容</h4><blockquote>
<p>  示例</p>
</blockquote>
<p>通过调用 BeanUtils 的 <code>copyProperties</code> 方法，将 warehouse 的内容复制到 vo 中，两者的属性相同，但是 vo 增加了其他方法</p>
<pre class=" language-java"><code class="language-java">List<span class="token operator">&lt;</span>Warehouse<span class="token operator">></span> warehouses <span class="token operator">=</span> warehouseBiz<span class="token punctuation">.</span><span class="token function">getWarehouseIncludeVirtual</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
List<span class="token operator">&lt;</span>WarehouseVo<span class="token operator">></span> warehouseVos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span>Warehouse warehouse <span class="token operator">:</span> warehouses<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    WarehouseVo vo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WarehouseVo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    BeanUtils<span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span>warehouse<span class="token punctuation">,</span> vo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    warehouseVos<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>vo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> </code></pre>
<h4 id="4、Java代码注释TODO-FIXME-XXX的意义"><a href="#4、Java代码注释TODO-FIXME-XXX的意义" class="headerlink" title="4、Java代码注释TODO FIXME XXX的意义"></a>4、Java代码注释TODO FIXME XXX的意义</h4><p><strong>TODO: 说明：</strong></p>
<ul>
<li>如果代码中有该标识，说明在标识处有功能代码待编写，待实现的功能在说明中会简略说明，表示需要实现，但目前还未实现的功能。</li>
</ul>
<p><strong>FIXME: 说明：</strong></p>
<ul>
<li>如果代码中有该标识，说明标识处代码需要修正，甚至代码是错误的，不能工作，需要修复，如何修正会在说明中简略说明。代码是错误的，不能工作，需要修复</li>
</ul>
<p><strong>XXX: 说明：</strong></p>
<ul>
<li>如果代码中有该标识，说明标识处代码虽然实现了功能，但是实现的方法有待商榷，希望将来能改进，要改进的地方会在说明中简略说明。勉强可以工作，但是性能差等原因</li>
</ul>
<p>使用了上方注解之后可以在IDEA中快速查看到标记的代码位置。</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210727160922150.png" alt="image-20210727160922150" loading="lazy"></p>
<h4 id="6、sql优化的几种方式"><a href="#6、sql优化的几种方式" class="headerlink" title="6、sql优化的几种方式"></a>6、sql优化的几种方式</h4><ol>
<li><p>对查询进行优化，应尽量避免全表扫描，首先应考虑在 where 及 order by 涉及的列上建立索引</p>
</li>
<li><p>.应尽量避免在 where 子句中对字段进行 null 值判断，否则将导致引擎放弃使用索引而进行全表扫描，如：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> id <span class="token keyword">from</span> t <span class="token keyword">where</span> num <span class="token operator">is</span> <span class="token boolean">null</span>   </code></pre>
<p>可以在num上设置默认值0，确保表中num列没有null值，然后这样查询：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> id <span class="token keyword">from</span> t <span class="token keyword">where</span> num<span class="token operator">=</span><span class="token number">0</span>   </code></pre>
</li>
<li><p>应尽量避免在 where 子句中使用!=或&lt;&gt;操作符，否则将引擎放弃使用索引而进行全表扫描</p>
</li>
<li><p>对于连续的数值，能用 between 就不要用 in 了：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> id <span class="token keyword">from</span> t <span class="token keyword">where</span> num <span class="token operator">between</span> <span class="token number">1</span> <span class="token operator">and</span> <span class="token number">3</span> </code></pre>
</li>
<li><p>应尽量避免在 where 子句中对字段进行表达式操作，这将导致引擎放弃使用索引而进行全表扫描。如：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> id <span class="token keyword">from</span> t <span class="token keyword">where</span> num<span class="token operator">/</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">100</span> </code></pre>
<p>应改为: </p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> id <span class="token keyword">from</span> t <span class="token keyword">where</span> num<span class="token operator">=</span><span class="token number">100</span><span class="token operator">*</span><span class="token number">2</span>   </code></pre>
</li>
<li><p>应尽量避免在where子句中对字段进行函数操作，这将导致引擎放弃使用索引而进行全表扫描。如：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- name以abc开头的id</span>
<span class="token keyword">select</span> id <span class="token keyword">from</span> t <span class="token keyword">where</span> substring<span class="token punctuation">(</span>name<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">'abc'</span> </code></pre>
<p>应改为: </p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> id <span class="token keyword">from</span> t <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'abc%'</span> </code></pre>
</li>
<li><p>并不是所有索引对查询都有效，SQL是根据表中数据来进行查询优化的，当索引列有大量数据重复时，SQL查询可能不会去利用索引，如一表中有字段 sex 中的 male 、 female 几乎各一半，那么即使在sex上建了索引也对查询效率起不了作用</p>
</li>
<li><p>索引并不是越多越好，索引固然可以提高相应的 select 的效率，但同时也降低了 insert 及 update 的效率，因为 insert 或 update 时有可能会重建索引，索引最好不要超过6个</p>
</li>
<li><p>尽量使用数字型字段，若只含数值信息的字段尽量不要设计为字符型，这会降低查询和连接的性能，并会增加存储开销</p>
</li>
<li><p>尽可能的使用 varchar 代替 char ，因为首先变长字段存储空间小，可以节省存储空间，其次对于查询来说，在一个相对较小的字段内搜索效率显然要高些</p>
</li>
</ol>
<h4 id="7、update更新两个表格内容"><a href="#7、update更新两个表格内容" class="headerlink" title="7、update更新两个表格内容"></a>7、update更新两个表格内容</h4><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 查看需要修改的条目信息</span>
<span class="token keyword">SELECT</span>
    <span class="token number">a</span><span class="token punctuation">.</span>locationCode<span class="token punctuation">,</span>
    <span class="token number">a</span><span class="token punctuation">.</span>locationName <span class="token keyword">AS</span> <span class="token string">'发货单'</span><span class="token punctuation">,</span>
    <span class="token number">b</span><span class="token punctuation">.</span>locationName <span class="token keyword">AS</span> <span class="token string">'原库位'</span> 
<span class="token keyword">FROM</span>
    <span class="token punctuation">`</span>t_purchase_order_receipt<span class="token punctuation">`</span> <span class="token number">a</span>
    <span class="token keyword">JOIN</span> <span class="token punctuation">`</span>t_warehouse_position<span class="token punctuation">`</span> <span class="token number">b</span> <span class="token keyword">ON</span> <span class="token number">a</span><span class="token punctuation">.</span>locationName <span class="token operator">&lt;></span> <span class="token number">b</span><span class="token punctuation">.</span>locationName
<span class="token keyword">WHERE</span>
    <span class="token number">a</span><span class="token punctuation">.</span>locationCode <span class="token operator">=</span> <span class="token number">b</span><span class="token punctuation">.</span>locationCode<span class="token punctuation">;</span>


<span class="token comment" spellcheck="true">-- 执行更改</span>
<span class="token keyword">UPDATE</span> <span class="token punctuation">`</span>t_purchase_order_receipt<span class="token punctuation">`</span> <span class="token number">a</span><span class="token punctuation">,</span>
<span class="token punctuation">`</span>t_warehouse_position<span class="token punctuation">`</span> <span class="token number">b</span> 
<span class="token keyword">SET</span> <span class="token number">a</span><span class="token punctuation">.</span>locationName <span class="token operator">=</span> <span class="token number">b</span><span class="token punctuation">.</span>locationName 
<span class="token keyword">WHERE</span>
    <span class="token number">a</span><span class="token punctuation">.</span>locationCode <span class="token operator">=</span> <span class="token number">b</span><span class="token punctuation">.</span>locationCode 
    <span class="token operator">AND</span> <span class="token number">a</span><span class="token punctuation">.</span>locationName <span class="token operator">&lt;></span> <span class="token number">b</span><span class="token punctuation">.</span>locationName<span class="token punctuation">;</span></code></pre>
<h4 id="8、自定义拦截器"><a href="#8、自定义拦截器" class="headerlink" title="8、自定义拦截器"></a>8、自定义拦截器</h4><blockquote>
<p>  用于拦截未登录或授权的用户</p>
</blockquote>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/**
* 1、继承 HandlerInterceptorAdapter 抽象类
* 2、重写方法：
*  preHandle：该方法将在Controller处理之前进行调用
*  postHandle: 它的执行时间是在处理器进行处理之后，也就是在Controller的方法调用之后执行
*  afterCompletion：该方法也是需要当前对应的Interceptor的preHandle方法的返回值为true时才会执行
*/</span>
<span class="token annotation punctuation">@Component</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token keyword">extends</span> <span class="token class-name">HandlerInterceptorAdapter</span> <span class="token punctuation">{</span> 
    <span class="token keyword">public</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">,</span> Object handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span> 
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">preHandle</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postHandle</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">,</span> Object handler<span class="token punctuation">,</span> ModelAndView modelAndView<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span> 
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">postHandle</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> modelAndView<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterCompletion</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">,</span> Object handler<span class="token punctuation">,</span> Exception ex<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span> 
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">afterCompletion</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterConcurrentHandlingStarted</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">,</span> Object handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span> 
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">afterConcurrentHandlingStarted</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> </code></pre>
<h4 id="9、Java中-的作用"><a href="#9、Java中-的作用" class="headerlink" title="9、Java中 :: 的作用"></a>9、Java中 :: 的作用</h4><blockquote>
<p>  用来调用方法</p>
</blockquote>
<p>Java 8 中我们可以通过 <code>::</code> 关键字来访问类的构造方法，对象方法，静态方法</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span> 
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printValur</span><span class="token punctuation">(</span>String str<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"print value : "</span> <span class="token operator">+</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        List<span class="token operator">&lt;</span>String<span class="token operator">></span> al <span class="token operator">=</span> Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token string">"d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        al<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>Test<span class="token operator">:</span><span class="token operator">:</span>printValur<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">// 下面的方法和上面等价的</span>
        Consumer<span class="token operator">&lt;</span>String<span class="token operator">></span> methodParam <span class="token operator">=</span> Test<span class="token operator">:</span><span class="token operator">:</span>printValur<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 方法参数</span>
        al<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>x <span class="token operator">-</span><span class="token operator">></span> methodParam<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 方法执行accept</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> </code></pre>
<h4 id="10、匹配map的键"><a href="#10、匹配map的键" class="headerlink" title="10、匹配map的键"></a>10、匹配map的键</h4><pre class=" language-java"><code class="language-java">Optional<span class="token operator">&lt;</span>String<span class="token operator">></span> key <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>e <span class="token operator">-</span><span class="token operator">></span> e<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"退货"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findAny</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
String s <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Object o <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="11、Hutool-读取Excel文件"><a href="#11、Hutool-读取Excel文件" class="headerlink" title="11、Hutool 读取Excel文件"></a>11、Hutool 读取Excel文件</h4><blockquote>
<p>  官方文档：<a target="_blank" rel="noopener" href="https://hutool.cn/docs/#/poi/Excel%E5%B7%A5%E5%85%B7-ExcelUtil">https://hutool.cn/docs/#/poi/Excel%E5%B7%A5%E5%85%B7-ExcelUtil</a></p>
</blockquote>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 加载Excel表格</span>
File file <span class="token operator">=</span> FileUtil<span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"C:\\Users\\12562\\Desktop\\退货数据批量导入模板.xlsx"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
FileInputStream fi1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
ExcelReader template <span class="token operator">=</span> ExcelUtil<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span>fi1<span class="token punctuation">,</span> <span class="token string">"批量导入模板"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 读取内容</span>
List<span class="token operator">&lt;</span>Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">>></span> templateList <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 创建Mapper映射</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> String<span class="token operator">></span> TITLE_MAPPING <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span>String<span class="token punctuation">,</span> String<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">{</span> 
    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"品类"</span><span class="token punctuation">,</span> <span class="token string">"category"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"收集日期"</span><span class="token punctuation">,</span> <span class="token string">"collectDate"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"市场分析"</span><span class="token punctuation">,</span> <span class="token string">"analysisSummary"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"分析详情"</span><span class="token punctuation">,</span> <span class="token string">"analysisDetails"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"行情策略"</span><span class="token punctuation">,</span> <span class="token string">"strategySummary"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"策略详情"</span><span class="token punctuation">,</span> <span class="token string">"strategyDetails"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"品种"</span><span class="token punctuation">,</span> <span class="token string">"variety"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"年份"</span><span class="token punctuation">,</span> <span class="token string">"year"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"产地省份"</span><span class="token punctuation">,</span> <span class="token string">"productProvince"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"产地市"</span><span class="token punctuation">,</span> <span class="token string">"productCity"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"最低出厂价(kg/元)"</span><span class="token punctuation">,</span> <span class="token string">"lowestDeliverPrice"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"最高出厂价(kg/元)"</span><span class="token punctuation">,</span> <span class="token string">"highestDeliverPrice"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"到货地省份"</span><span class="token punctuation">,</span> <span class="token string">"arriveProvince"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"到货地市"</span><span class="token punctuation">,</span> <span class="token string">"arriveCity"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"最低到货价(kg/元)"</span><span class="token punctuation">,</span> <span class="token string">"lowestArrivePrice"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"最高到货价(kg/元)"</span><span class="token punctuation">,</span> <span class="token string">"highestArrivePrice"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"备注"</span><span class="token punctuation">,</span> <span class="token string">"remark"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 将内容转为Bean</span>
ExportVo exportVo <span class="token operator">=</span> BeanUtil<span class="token punctuation">.</span><span class="token function">toBean</span><span class="token punctuation">(</span>map<span class="token punctuation">,</span> ExportVo<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> CopyOptions<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setFieldMapping</span><span class="token punctuation">(</span>TITLE_MAPPING<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 忽略某些字段</span>
ExportVo exportVo <span class="token operator">=</span> BeanUtil<span class="token punctuation">.</span><span class="token function">toBean</span><span class="token punctuation">(</span>map<span class="token punctuation">,</span> ExportVo<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> CopyOptions<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>ExportVo<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">"category"</span><span class="token punctuation">,</span> <span class="token string">"status"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setFieldMapping</span><span class="token punctuation">(</span>TITLE_MAPPING<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 根据两个字段进行分组</span>
Map<span class="token operator">&lt;</span>Pair<span class="token operator">&lt;</span>LocalDate<span class="token punctuation">,</span> CategoryEnum<span class="token operator">></span><span class="token punctuation">,</span> List<span class="token operator">&lt;</span>ExportVo<span class="token operator">>></span> collect <span class="token operator">=</span> exportVoList<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">groupingBy</span><span class="token punctuation">(</span>ele <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">new</span> <span class="token class-name">Pair</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>ele<span class="token punctuation">.</span><span class="token function">getCollectDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ele<span class="token punctuation">.</span><span class="token function">getCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="12、Stream-流的用法"><a href="#12、Stream-流的用法" class="headerlink" title="12、Stream()流的用法"></a>12、Stream()流的用法</h4><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 将内容映射为 Map 的键值对</span>
List<span class="token operator">&lt;</span>Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">>></span> templateList<span class="token punctuation">;</span>
Map<span class="token operator">&lt;</span>Pair<span class="token operator">&lt;</span>Object<span class="token punctuation">,</span> Object<span class="token operator">></span><span class="token punctuation">,</span> Triple<span class="token operator">&lt;</span>Object<span class="token punctuation">,</span> Object<span class="token punctuation">,</span> Object<span class="token operator">>></span> itemDict <span class="token operator">=</span> itemList
    <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span>e <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">new</span> <span class="token class-name">Pair</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"对照方案名称"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"品名（客户）"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                              <span class="token punctuation">,</span> e <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">new</span> <span class="token class-name">Triple</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"料号（客户）"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"料号（PMS）"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"品名（PMS）"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 获取内容</span>
List<span class="token operator">&lt;</span>BatchRefundExcelDto<span class="token operator">></span> refundList；
<span class="token keyword">for</span><span class="token punctuation">(</span>BatchRefundExcelDto dto <span class="token operator">:</span> refundList<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    Triple<span class="token operator">&lt;</span>Object<span class="token punctuation">,</span> Object<span class="token punctuation">,</span> Object<span class="token operator">></span> triple <span class="token operator">=</span> itemDict<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Pair</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>dto<span class="token punctuation">.</span><span class="token function">getControlScheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dto<span class="token punctuation">.</span><span class="token function">getItemName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>triple <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            dto<span class="token punctuation">.</span><span class="token function">setOutCode</span><span class="token punctuation">(</span>String<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>triple<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            dto<span class="token punctuation">.</span><span class="token function">setSkuCode</span><span class="token punctuation">(</span>String<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>triple<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            dto<span class="token punctuation">.</span><span class="token function">setSkuName</span><span class="token punctuation">(</span>String<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>triple<span class="token punctuation">.</span><span class="token function">getZ</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 

<span class="token comment" spellcheck="true">// 按相同的值进行分组</span>
Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>BatchRefundExcelDto<span class="token operator">>></span> collect <span class="token operator">=</span> refundList
    <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>Collectors<span class="token punctuation">.</span><span class="token function">groupingBy</span><span class="token punctuation">(</span>BatchRefundExcelDto<span class="token operator">:</span><span class="token operator">:</span>getRefundId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 匹配一个符合要求的键的值</span>
Optional<span class="token operator">&lt;</span>String<span class="token operator">></span> key <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>e <span class="token operator">-</span><span class="token operator">></span> e<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"xxx"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findAny</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Object o <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="13、根据文件名获取输入流"><a href="#13、根据文件名获取输入流" class="headerlink" title="13、根据文件名获取输入流"></a>13、根据文件名获取输入流</h4><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 固有句式，后面可提升</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span> <span class="token operator">||</span> StringUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">return</span> BaseRet<span class="token punctuation">.</span><span class="token function">createFailResult</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token string">"文件名称不合法"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 

String url <span class="token operator">=</span> qiniuClient<span class="token punctuation">.</span><span class="token function">getPrivateFileUrl</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
InputStream inputStream <span class="token operator">=</span> qiniuClient<span class="token punctuation">.</span><span class="token function">getFileInputStream</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="14、将输入流转为字节数组"><a href="#14、将输入流转为字节数组" class="headerlink" title="14、将输入流转为字节数组"></a>14、将输入流转为字节数组</h4><blockquote>
<p>  因为使用Hutool工具类读取Excel后，会自动关闭输入流导致无法读取多个工作表</p>
</blockquote>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 复制输入流到字节输出流</span>
ByteArrayOutputStream byteArrayOutputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
IOUtils<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">,</span> byteArrayOutputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> byteArrayOutputStream<span class="token punctuation">.</span><span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 将字节数组转为输入流</span>
ExcelReader template <span class="token operator">=</span> ExcelUtil<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"批量导入模板"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ExcelReader item <span class="token operator">=</span> ExcelUtil<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"对照表管理（品名）"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ExcelReader body <span class="token operator">=</span> ExcelUtil<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"对照表管理（主体）"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="15、进行Map表格映射并转为Bean"><a href="#15、进行Map表格映射并转为Bean" class="headerlink" title="15、进行Map表格映射并转为Bean"></a>15、进行Map表格映射并转为Bean</h4><blockquote>
<p>  使用Hutool工具类的BeanUtil.toBean() 方法，使 <code>原始Map</code> 根据 <code>映射Map</code> 转换为 <code>Bean</code>，其中映射Map的键为原始Map的键，而值为Bean中的变量名</p>
</blockquote>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// Person 类</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span> 
    <span class="token keyword">private</span> String name<span class="token punctuation">,</span>
    <span class="token keyword">private</span> String age
<span class="token punctuation">}</span> 
<span class="token comment" spellcheck="true">// 原始Map</span>
HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> CollUtil<span class="token punctuation">.</span><span class="token function">newHashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"a_name"</span><span class="token punctuation">,</span> <span class="token string">"Joe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"b_age"</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 映射Map：设置别名，用于对应bean的字段名</span>
HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> String<span class="token operator">></span> mapping <span class="token operator">=</span> CollUtil<span class="token punctuation">.</span><span class="token function">newHashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mapping<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"a_name"</span><span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mapping<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"b_age"</span><span class="token punctuation">,</span> <span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 进行 toBean 转换</span>
Person person <span class="token operator">=</span> BeanUtil<span class="token punctuation">.</span><span class="token function">toBean</span><span class="token punctuation">(</span>map<span class="token punctuation">,</span> Person<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> CopyOptions<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setFieldMapping</span><span class="token punctuation">(</span>mapping<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>通过映射的方式，就不需要频繁使用 map.get 方法获取值并调用setXxx方法。</p>
<h4 id="16、创建API文档的方式"><a href="#16、创建API文档的方式" class="headerlink" title="16、创建API文档的方式"></a>16、创建API文档的方式</h4><ol>
<li><p>在对应的控制层上方添加<code>@Api</code>注解</p>
<pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">"pc-退货处理"</span><span class="token punctuation">}</span> <span class="token punctuation">)</span></code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210803160420009.png" alt="image-20210803160420009" loading="lazy"></p>
</li>
<li><p>在对应的接口上方添加<code>@ApiOperation</code>注解</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// value作为标签显示的内容，notes作为该Api的描述内容 </span>
<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"批量导入退货单"</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">"通过Excel批量导入退货单"</span><span class="token punctuation">,</span> httpMethod <span class="token operator">=</span> <span class="token string">"POST"</span><span class="token punctuation">)</span></code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210803160445784.png" alt="image-20210803160445784" loading="lazy"></p>
<p>效果如下：</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210803160603377.png" alt="image-20210803160603377" loading="lazy"></p>
</li>
</ol>
<h4 id="17、输出日志信息"><a href="#17、输出日志信息" class="headerlink" title="17、输出日志信息"></a>17、输出日志信息</h4><pre class=" language-java"><code class="language-java">logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"BarLoadRelationshipWebService.importData { } "</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="18、获取当天时间"><a href="#18、获取当天时间" class="headerlink" title="18、获取当天时间"></a>18、获取当天时间</h4><pre class=" language-java"><code class="language-java">ConversionFunction<span class="token punctuation">.</span>Date<span class="token punctuation">.</span><span class="token function">formatDate</span><span class="token punctuation">(</span>LocalDate<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<h4 id="19、获取当前登录的用户信息"><a href="#19、获取当前登录的用户信息" class="headerlink" title="19、获取当前登录的用户信息"></a>19、获取当前登录的用户信息</h4><pre class=" language-java"><code class="language-java">BizUser user <span class="token operator">=</span> ThreadData<span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="20、增加事务回滚"><a href="#20、增加事务回滚" class="headerlink" title="20、增加事务回滚"></a>20、增加事务回滚</h4><blockquote>
<p>  在对应的方法上面添加注解</p>
</blockquote>
<pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Transactional</span><span class="token punctuation">(</span>rollbackFor <span class="token operator">=</span> Exception<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span></code></pre>
<h4 id="21、拼接字符串"><a href="#21、拼接字符串" class="headerlink" title="21、拼接字符串"></a>21、拼接字符串</h4><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 例子</span>
String<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"料号【%s】不存在，请先补充或检查是否填写错误"</span><span class="token punctuation">,</span> barLoadRel<span class="token punctuation">.</span><span class="token function">getMaterialCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<h4 id="22、抛出异常"><a href="#22、抛出异常" class="headerlink" title="22、抛出异常"></a>22、抛出异常</h4><pre class=" language-java"><code class="language-java"><span class="token keyword">throw</span> BaseRet<span class="token punctuation">.</span><span class="token function">createFailResult</span><span class="token punctuation">(</span><span class="token number">1111</span><span class="token punctuation">,</span> errorList<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="23、Wrappers的链式使用"><a href="#23、Wrappers的链式使用" class="headerlink" title="23、Wrappers的链式使用"></a>23、Wrappers的链式使用</h4><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 例子</span>
dingDepManageDao<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>Wrappers<span class="token punctuation">.</span>&lt;DepManage<span class="token operator">></span><span class="token function">lambdaQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span>DepManage<span class="token operator">:</span><span class="token operator">:</span>getRoleId<span class="token punctuation">,</span> role<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">orderByDesc</span><span class="token punctuation">(</span>DepManage<span class="token operator">:</span><span class="token operator">:</span>getRoleId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="24、修改日期格式"><a href="#24、修改日期格式" class="headerlink" title="24、修改日期格式"></a>24、修改日期格式</h4><p>在po类上增加注解</p>
<pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@JsonFormat</span><span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"票据日期"</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> String invoiceDate<span class="token punctuation">;</span></code></pre>
<h4 id="25、数值工具类NumberUtils"><a href="#25、数值工具类NumberUtils" class="headerlink" title="25、数值工具类NumberUtils"></a>25、数值工具类NumberUtils</h4><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 字符串转整型</span>
<span class="token keyword">int</span> id <span class="token operator">=</span> NumberUtils<span class="token punctuation">.</span><span class="token function">toInt</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="26、Collectors-groupingBy分组顺序错误"><a href="#26、Collectors-groupingBy分组顺序错误" class="headerlink" title="26、Collectors.groupingBy分组顺序错误"></a>26、Collectors.groupingBy分组顺序错误</h4><p>之前直接使用一个参数进行分组，默认是使用HashMap的，而HashMap是无序的，所以不会按照顺序进行分组。</p>
<pre class=" language-java"><code class="language-java">Collectors<span class="token punctuation">.</span><span class="token function">groupingBy</span><span class="token punctuation">(</span>BatchRefundExcelDto<span class="token operator">:</span><span class="token operator">:</span>getRefundId<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>使用LinkedHashMap进行分组即可</p>
<pre class=" language-java"><code class="language-java">Collectors<span class="token punctuation">.</span><span class="token function">groupingBy</span><span class="token punctuation">(</span>BatchRefundExcelDto<span class="token operator">:</span><span class="token operator">:</span>getRefundId<span class="token punctuation">,</span> LinkedHashMap<span class="token operator">:</span><span class="token operator">:</span><span class="token keyword">new</span><span class="token punctuation">,</span> Collectors<span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="27、日志TraceId"><a href="#27、日志TraceId" class="headerlink" title="27、日志TraceId"></a>27、日志TraceId</h4><blockquote>
<p>  作用</p>
</blockquote>
<p>由于生产环境并发很大，每个请求之间的日志并不连贯，互相穿插。而traceId可以作为日志的一个唯一标识，用于分辨出哪些日志是哪个请求打印的。</p>
<blockquote>
<p>  MDC</p>
</blockquote>
<ul>
<li>日志追踪目标是每次请求级别的，也就是说同一个接口的每次请求，都应该有不同的traceId。</li>
<li>每次接口请求，都是一个单独的线程，所以自然我们很容易考虑到通过ThreadLocal实现上述需求。</li>
<li>考虑到log4j本身已经提供了类似的功能MDC，所以直接使用MDC进行实现。</li>
</ul>
<p><strong>关于MDC的简述</strong></p>
<ul>
<li>Mapped Diagnostic Context，即：映射诊断环境。</li>
<li>MDC是 log4j 和 logback 提供的一种方便在多线程条件下记录日志的功能。</li>
<li>MDC 可以看成是一个与当前线程绑定的哈希表，可以往其中添加键值对。</li>
</ul>
<p><strong>关于MDC的关键操作</strong></p>
<ul>
<li>向MDC中设置值：<code>MDC.put(key, value);</code></li>
<li>从MDC中取值：<code>MDC.get(key);</code></li>
<li>将MDC中内容打印到日志中：<code>%X{ key} </code></li>
</ul>
<blockquote>
<p>  实现方法</p>
</blockquote>
<p>采用过滤器的形式，即：自定义一个Filter，继承自<code>GenericFilterBean</code></p>
<blockquote>
<p>  实现步骤</p>
</blockquote>
<p>1、创建自定义过滤器</p>
<pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TraceFilter</span> <span class="token keyword">extends</span> <span class="token class-name">OncePerRequestFilter</span> <span class="token punctuation">{</span> 

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doFilterInternal</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">,</span> FilterChain filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span> 
        MDC<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"traceId"</span><span class="token punctuation">,</span> <span class="token function">getTraceId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 

    <span class="token keyword">private</span> String <span class="token function">getTraceId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">long</span> timestamp <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        UUID uuid <span class="token operator">=</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String uniqueId <span class="token operator">=</span> timestamp <span class="token operator">+</span> uuid<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> uniqueId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> </code></pre>
<p>2、在 <code>logback.xml</code> 配置文件中修改日志输出格式，使用 <code>%X{ traceId} </code> 获取tranceId</p>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>console<span class="token punctuation">"</span></span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">></span></span>[%date{ HH:mm:ss.SSS} ] %X{ traceId}  [%thread] [%-5level] [%logger{ 36} ] %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span></code></pre>
<h4 id="28、SpringBoot的AOP"><a href="#28、SpringBoot的AOP" class="headerlink" title="28、SpringBoot的AOP"></a>28、SpringBoot的AOP</h4><blockquote>
<p>  相关概念</p>
</blockquote>
<ul>
<li>Aspect（切面）： Aspect 声明类似于 Java 中的类声明，在 Aspect 中会包含着一些 Pointcut 以及相应的 Advice</li>
<li>Joint point（连接点）：表示在程序中明确定义的点，典型的包括方法调用，对类成员的访问以及异常处理程序块的执行等等，它自身还可以嵌套其它 joint point</li>
<li>Pointcut（切点）：用来描述和指定Join point。表示一组 Joint point，这些 joint point 或是通过逻辑关系组合起来，或是通过通配、正则表达式等方式集中起来，它定义了相应的 Advice 将要发生的地方</li>
<li>Advice（增强）：Advice 定义了在 Pointcut 里面定义的程序点具体要做的操作，它通过 before、after 和 around 来区别是在每个 joint point 之前、之后还是代替执行的代码</li>
<li>Target（目标对象）：织入 Advice 的目标对象</li>
<li>Weaving（织入）：将 Aspect 和其他对象连接起来, 并创建 Adviced object 的过程</li>
</ul>
<blockquote>
<p>  Advice 的类型</p>
</blockquote>
<ul>
<li><p>@before ：在 join point 前被执行的 advice. 虽然 before advice 是在 join point 前被执行, 但是它并不能够阻止 join point 的执行, 除非发生了异常(即我们在 before advice 代码中, 不能人为地决定是否继续执行 join point 中的代码)</p>
</li>
<li><p>@AfterReturning：在一个 join point 正常返回后执行的 advice</p>
</li>
<li><p>@AfterThrowing：当一个 join point 抛出异常后执行的 advice</p>
</li>
<li><p>@After：无论一个 join point 是正常退出还是发生了异常, 都会被执行的 advice</p>
</li>
<li><p>@Around：在 join point 前和 joint point 退出后都执行的 advice. 这个是最常用的 advice</p>
</li>
</ul>
<blockquote>
<p>  切入点表达式关键词用例：</p>
</blockquote>
<p>1）execution：用于匹配子表达式。</p>
<pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span>“<span class="token function">execution</span><span class="token punctuation">(</span><span class="token operator">*</span> com<span class="token punctuation">.</span>cjm<span class="token punctuation">.</span>model<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">)</span>”<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">}</span> </code></pre>
<p>2）within：用于匹配连接点所在的Java类或者包。</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 匹配Person类中的所有方法</span>
<span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span>“<span class="token function">within</span><span class="token punctuation">(</span>com<span class="token punctuation">.</span>cjm<span class="token punctuation">.</span>model<span class="token punctuation">.</span>Person<span class="token punctuation">)</span>”<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">}</span> 

<span class="token comment" spellcheck="true">// 匹配com.cjm包及其子包中所有类中的所有方法</span>
<span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span>“<span class="token function">within</span><span class="token punctuation">(</span>com<span class="token punctuation">.</span>cjm<span class="token punctuation">.</span><span class="token punctuation">.</span>*<span class="token punctuation">)</span>”<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">}</span> </code></pre>
<blockquote>
<p>  最简单的使用</p>
</blockquote>
<pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span> 
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"execution(* com.tl.provider.sale.service.SaleService.*(..))"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token comment" spellcheck="true">// 执行前置操作</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> </code></pre>
<h4 id="29、Logback的使用"><a href="#29、Logback的使用" class="headerlink" title="29、Logback的使用"></a>29、Logback的使用</h4><p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/70.png" alt="img" loading="lazy"></p>
<blockquote>
<p>  根节点 <code>&lt;configuration&gt;</code></p>
</blockquote>
<ul>
<li>scan: 当此属性设置为true时，配置文件如果发生改变，将会被重新加载，默认值为true</li>
<li>scanPeriod: 设置监测配置文件是否有修改的时间间隔，如果没有给出时间单位，默认单位是毫秒。当scan为true时，此属性生效。默认的时间间隔为1分钟</li>
<li>debug: 当此属性设置为true时，将打印出logback内部日志信息，实时查看logback运行状态。默认值为false</li>
</ul>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span> <span class="token attr-name">scan</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">scanPeriod</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>60 seconds<span class="token punctuation">"</span></span> <span class="token attr-name">debug</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 
　　  <span class="token comment" spellcheck="true">&lt;!--其他配置省略--></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span>　</code></pre>
<blockquote>
<p>  设置上下文名称<code>&lt;contextName&gt;</code></p>
</blockquote>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>contextName</span><span class="token punctuation">></span></span>myAppName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>contextName</span><span class="token punctuation">></span></span>  </code></pre>
<blockquote>
<p>  设置变量 <code> &lt;property&gt;</code></p>
</blockquote>
<p>name的值是变量的名称，value的值时变量定义的值</p>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>APP_Name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myAppName<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre>
<blockquote>
<p>  子节点<code>&lt;appender&gt;</code></p>
</blockquote>
<p>负责写日志的组件，它有两个必要属性name和class，参考文章：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/lijia0511/p/5680300.html">https://www.cnblogs.com/lijia0511/p/5680300.html</a></p>
<ul>
<li>name：appender名称</li>
<li>class：appender的全限定名，例如 ConsoleAppender 输出到控制台，RollingFileAppender 滚动输出到日志文件， FileAppender 直接添加到日志文件</li>
</ul>
<p><code>&lt;encoder&gt;</code>：对日志进行格式化。<br><code>&lt;target&gt;</code>：字符串System.out(默认)或者System.err</p>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span> 
　　　<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>STDOUT<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 
　　　　　 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">></span></span> 
　　　　　　　　　<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">></span></span>%-4relative [%thread] %-5level %logger{ 35}  - %msg %n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">></span></span> 
　　　　　 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">></span></span> 
　　　<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span> 

　　　<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>INFO<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 
　　　　　　<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>STDOUT<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span> 
　　　<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">></span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span></code></pre>
<blockquote>
<p>  父节点 <code>&lt;root&gt;</code></p>
</blockquote>
<p>用于添加子节点</p>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>INFO<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 
    <span class="token comment" spellcheck="true">&lt;!-- 将日志内容应用到指定appender --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>STDOUT<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">></span></span> </code></pre>
<blockquote>
<p>  <code>&lt;loger&gt;</code></p>
</blockquote>
<p>用来设置某一个包或者具体的某一个类的日志打印级别、以及指定<code>&lt;appender&gt;</code>，或者将指定包的内容输出到指定文件中。</p>
<p><code>&lt;loger&gt;</code>有一个name属性，一个可选的level和一个可选的addtivity属性</p>
<ul>
<li>name：用来<strong>指定受此loger约束的某一个包或者具体的某一个类</strong></li>
<li>level：用来设置打印级别，大小写无关：TRACE, DEBUG, INFO, WARN, ERROR, ALL 和 OFF，还有一个特俗值INHERITED或者同义词NULL，代表强制执行上级的级别</li>
<li>addtivity：是否向上级loger传递打印信息。默认是true</li>
</ul>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>access<span class="token punctuation">"</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>INFO<span class="token punctuation">"</span></span> <span class="token attr-name">additivity</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token comment" spellcheck="true">&lt;!-- 将 access 类的日志内容应用到指定appender --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>access<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logger</span><span class="token punctuation">></span></span></code></pre>
<blockquote>
<p>  保存日志 <code>&lt;rollingPolicy &gt;</code></p>
</blockquote>
<p><strong>class 属性用于指定滚动策略</strong></p>
<p><code>class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</code>是 最常用的滚动策略，它根据时间来制定滚动策略，既负责滚动也负责出发滚动</p>
<ul>
<li><code>&lt;fileNamePattern&gt;</code>：必要节点，包含文件名及“%d”转换符，“%d”可以包含一个java.text.SimpleDateFormat指定的时间格式，如：%d{yyyy-MM}</li>
<li><code>&lt;maxHistory&gt;</code>：可选节点，控制保留的归档文件的最大数量，超出数量就删除旧文件</li>
</ul>
<pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- 运行日志，class必须指向RollingFileAppender --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>run<span class="token punctuation">"</span></span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.RollingFileAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rollingPolicy</span>
                   <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.TimeBasedRollingPolicy<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileNamePattern</span><span class="token punctuation">></span></span>${ path} /run.%d{ yyyy-MM-dd} .log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileNamePattern</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxHistory</span><span class="token punctuation">></span></span>7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxHistory</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rollingPolicy</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">></span></span>[%date{ HH:mm:ss.SSS} ] [%thread] [%-5level] [%logger{ 36} ] %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span></code></pre>
<blockquote>
<p>  配置案例</p>
</blockquote>
<pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span> <span class="token attr-name">scan</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">scanPeriod</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>60 seconds<span class="token punctuation">"</span></span>
    <span class="token attr-name">debug</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>contextName</span><span class="token punctuation">></span></span>jweb_tl_pms<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>contextName</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>path<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/data/jweblog/jweb_tl_pms<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token comment" spellcheck="true">&lt;!-- 控制台 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>console<span class="token punctuation">"</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">></span></span>[%date{ HH:mm:ss.SSS} ] [%thread] [%-5level] [%logger{ 36} ] %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span>


    <span class="token comment" spellcheck="true">&lt;!-- 访问日志 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>access<span class="token punctuation">"</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.RollingFileAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rollingPolicy</span>
            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.TimeBasedRollingPolicy<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileNamePattern</span><span class="token punctuation">></span></span>${ path} /access/access.%d{ yyyy-MM-dd} .log
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileNamePattern</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxHistory</span><span class="token punctuation">></span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxHistory</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rollingPolicy</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">></span></span>[%date{ HH:mm:ss.SSS} ] [%thread] [%-5level] [%logger{ 36} ] %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span>

    <span class="token comment" spellcheck="true">&lt;!-- 运行日志 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>run<span class="token punctuation">"</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.RollingFileAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rollingPolicy</span>
            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.TimeBasedRollingPolicy<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileNamePattern</span><span class="token punctuation">></span></span>${ path} /run.%d{ yyyy-MM-dd} .log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileNamePattern</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxHistory</span><span class="token punctuation">></span></span>7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxHistory</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rollingPolicy</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">></span></span>[%date{ HH:mm:ss.SSS} ] [%thread] [%-5level] [%logger{ 36} ] %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span>

    <span class="token comment" spellcheck="true">&lt;!-- 错误日志 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>error<span class="token punctuation">"</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.RollingFileAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ch.qos.logback.classic.filter.LevelFilter<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>level</span><span class="token punctuation">></span></span>ERROR<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>level</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>onMatch</span><span class="token punctuation">></span></span>ACCEPT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>onMatch</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>onMismatch</span><span class="token punctuation">></span></span>DENY<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>onMismatch</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rollingPolicy</span>
            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.TimeBasedRollingPolicy<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileNamePattern</span><span class="token punctuation">></span></span>${ path} /error.%d{ yyyy-MM-dd} .log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileNamePattern</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxHistory</span><span class="token punctuation">></span></span>21<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxHistory</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rollingPolicy</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">></span></span>[%date{ HH:mm:ss.SSS} ] [%thread] [%-5level] [%logger{ 36} ] %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span>


    <span class="token comment" spellcheck="true">&lt;!-- 访问日志 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>access<span class="token punctuation">"</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>INFO<span class="token punctuation">"</span></span> <span class="token attr-name">additivity</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>access<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logger</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.tl<span class="token punctuation">"</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>DEBUG<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logger</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>INFO<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>run<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>error<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>console<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span></code></pre>
<blockquote>
<p>  输出日志</p>
</blockquote>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span> 
    <span class="token keyword">private</span> <span class="token keyword">static</span> Logger logger <span class="token operator">=</span> LoggerFactory<span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span>Test<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        String hello <span class="token operator">=</span> <span class="token string">"hello world"</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"test: { } "</span><span class="token punctuation">,</span> hello<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> </code></pre>
<h4 id="30、日志级别"><a href="#30、日志级别" class="headerlink" title="30、日志级别"></a>30、日志级别</h4><blockquote>
<p>  ALL &lt; TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATAL &lt; OFF</p>
</blockquote>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/v2-7293bde8559e8496684637d18a29c813_720w.jpg" alt="img" loading="lazy"></p>
<h4 id="31、自定义日志过滤器"><a href="#31、自定义日志过滤器" class="headerlink" title="31、自定义日志过滤器"></a>31、自定义日志过滤器</h4><p>过滤器返回参数有 DENY，NEUTRAL，ACCEPT。</p>
<ul>
<li><strong>DENY</strong>，日志将立即被抛弃不再经过其他过滤器</li>
<li><strong>NEUTRAL</strong>，有序列表里的下个过滤器过接着处理日志</li>
<li><strong>ACCEPT</strong>，日志会被立即处理，不再经过剩余过滤器</li>
</ul>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211215193945509.png" alt="image-20211215193945509" loading="lazy"></p>
<blockquote>
<p>  实现步骤</p>
</blockquote>
<p>1、继承<code>Filter&lt;ILoggingEvent&gt;</code>，重写 decide 方法，并指定要过滤的类</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>tl<span class="token punctuation">.</span>common<span class="token punctuation">.</span>config<span class="token punctuation">;</span>

<span class="token keyword">import</span> ch<span class="token punctuation">.</span>qos<span class="token punctuation">.</span>logback<span class="token punctuation">.</span>classic<span class="token punctuation">.</span>spi<span class="token punctuation">.</span>ILoggingEvent<span class="token punctuation">;</span>
<span class="token keyword">import</span> ch<span class="token punctuation">.</span>qos<span class="token punctuation">.</span>logback<span class="token punctuation">.</span>core<span class="token punctuation">.</span>filter<span class="token punctuation">.</span>Filter<span class="token punctuation">;</span>
<span class="token keyword">import</span> ch<span class="token punctuation">.</span>qos<span class="token punctuation">.</span>logback<span class="token punctuation">.</span>core<span class="token punctuation">.</span>spi<span class="token punctuation">.</span>FilterReply<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LogBackFilter</span> <span class="token keyword">extends</span> <span class="token class-name">Filter</span><span class="token operator">&lt;</span>ILoggingEvent<span class="token operator">></span> <span class="token punctuation">{</span> 

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> FilterReply <span class="token function">decide</span><span class="token punctuation">(</span>ILoggingEvent event<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token comment" spellcheck="true">// 指定打印日志类</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getLoggerName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"com.tl.modules.purchase.report.webservice"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            <span class="token keyword">return</span> FilterReply<span class="token punctuation">.</span>DENY<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>  <span class="token keyword">else</span> <span class="token punctuation">{</span> 
            <span class="token keyword">return</span> FilterReply<span class="token punctuation">.</span>ACCEPT<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> </code></pre>
<p>2、在对应的日志配置中加上过滤器</p>
<pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- 控制台 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>console<span class="token punctuation">"</span></span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">></span></span>[%date{ HH:mm:ss.SSS} ] [%thread] [%-5level] [%logger{ 36} ] %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">></span></span>
    <span class="token comment" spellcheck="true">&lt;!-- 引用自定义过滤器 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.tl.common.config.LogBackFilter<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span></code></pre>
<h4 id="32、请求拦截器"><a href="#32、请求拦截器" class="headerlink" title="32、请求拦截器"></a>32、请求拦截器</h4><p>继承 <code>HandlerInterceptorAdapter</code> 类</p>
<pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LogInterceptor</span> <span class="token keyword">extends</span> <span class="token class-name">HandlerInterceptorAdapter</span> <span class="token punctuation">{</span> 
    <span class="token comment" spellcheck="true">/**
     * Log the request entrance
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">,</span> Object handler<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token punctuation">}</span> 

    <span class="token comment" spellcheck="true">/**
     * Log the request finished
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postHandle</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">,</span> Object handler<span class="token punctuation">,</span>
                           ModelAndView modelAndView<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token punctuation">}</span> 

    <span class="token comment" spellcheck="true">/**
     * Log the request exit
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterCompletion</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">,</span> Object handler<span class="token punctuation">,</span> Exception ex<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token punctuation">}</span> 

<span class="token punctuation">}</span> </code></pre>
<h4 id="33、搜索网站的内容"><a href="#33、搜索网站的内容" class="headerlink" title="33、搜索网站的内容"></a>33、搜索网站的内容</h4><p>1、使用必应搜索：<a target="_blank" rel="noopener" href="https://cn.bing.com/">https://cn.bing.com/</a></p>
<p>2、输入搜索内容</p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># site:&lt;网站> &lt;搜索内容></span>
site:docs.spring.io application event</code></pre>
<h4 id="34、注解service和component的区别"><a href="#34、注解service和component的区别" class="headerlink" title="34、注解service和component的区别"></a>34、注解service和component的区别</h4><ul>
<li>@Service用于标注业务层组件</li>
<li>@Controller用于标注控制层组件（如struts中的action）</li>
<li>@Repository用于标注数据访问组件，即DAO组件</li>
<li>@Component泛指组件，当组件不好归类的时候，我们可以使用这个注解进行标注</li>
</ul>
<h4 id="35、SpringBoot事件发布与监听"><a href="#35、SpringBoot事件发布与监听" class="headerlink" title="35、SpringBoot事件发布与监听"></a>35、SpringBoot事件发布与监听</h4><blockquote>
<p>  官方文档：<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#context-functionality-events">https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#context-functionality-events</a></p>
</blockquote>
<p>1、创建事件，继承<code>ApplicationEvent </code></p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DingEvent</span> <span class="token keyword">extends</span> <span class="token class-name">ApplicationEvent</span> <span class="token punctuation">{</span> 
    <span class="token keyword">private</span> <span class="token keyword">final</span> String evenType<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> JSONObject content<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">DingEvent</span><span class="token punctuation">(</span>Object source<span class="token punctuation">,</span> String evenType<span class="token punctuation">,</span> JSONObject content<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">super</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>evenType <span class="token operator">=</span> evenType<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 

    <span class="token keyword">public</span> String <span class="token function">getEvenType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">return</span> evenType<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 

    <span class="token keyword">public</span> JSONObject <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">return</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> </code></pre>
<p>2、创建发布器，实现<code>ApplicationEventPublisherAware </code></p>
<pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DingPublisher</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationEventPublisherAware</span> <span class="token punctuation">{</span> 
    <span class="token keyword">private</span> ApplicationEventPublisher publisher<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setApplicationEventPublisher</span><span class="token punctuation">(</span>ApplicationEventPublisher applicationEventPublisher<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">this</span><span class="token punctuation">.</span>publisher <span class="token operator">=</span> applicationEventPublisher<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 

    <span class="token comment" spellcheck="true">/**
     * 发布事件
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendDingEvent</span><span class="token punctuation">(</span>String evenType<span class="token punctuation">,</span> JSONObject content<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        publisher<span class="token punctuation">.</span><span class="token function">publishEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DingEvent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> evenType<span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> </code></pre>
<p>3、定义监听器，可以继承<code>ApplicationListener&lt;BlockedListEvent&gt;</code>接口，也可以直接在方法上增加<code>@EventListener</code>注解（condition可以增加监听条件）</p>
<pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BlockedListNotifier</span> <span class="token punctuation">{</span> 
    Logger logger <span class="token operator">=</span> LoggerFactory<span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span>BlockedListNotifier<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> DingInfoBiz dingInfoBiz<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * 监听钉钉用户信息变更
     */</span>
    <span class="token annotation punctuation">@EventListener</span><span class="token punctuation">(</span>condition <span class="token operator">=</span> <span class="token string">"#event.evenType.startsWith('user')"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onModifyUserEvent</span><span class="token punctuation">(</span>DingEvent event<span class="token punctuation">)</span> <span class="token keyword">throws</span> ApiException <span class="token punctuation">{</span> 
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"BlockedListNotifier.onAddressBookEvent onModifyUserEvent:{ } "</span><span class="token punctuation">,</span> JSON<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dingInfoBiz<span class="token punctuation">.</span><span class="token function">updateUser</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getEvenType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"UserId"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> </code></pre>
<blockquote>
<p>  监听器方法默认为同步</p>
</blockquote>
<p>事件侦听器同步接收事件。这意味着<code>publishEvent()</code>方法将一直阻塞，直到所有侦听器都处理完事件。这种同步单线程方法的一个优点是，当侦听器接收到事件时，如果事务上下文可用，它将在发布服务器的事务上下文中操作。</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211220145751916.png" alt="image-20211220145751916" loading="lazy"></p>
<p>而加上<code>@Async</code>注解可以让监听方法变为异步</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211220150052185.png" alt="image-20211220150052185" loading="lazy"></p>
<h4 id="36、Java使用正则表达式"><a href="#36、Java使用正则表达式" class="headerlink" title="36、Java使用正则表达式"></a>36、Java使用正则表达式</h4><pre class=" language-java"><code class="language-java">String s <span class="token operator">=</span> <span class="token string">"[\"15504563517131058\",\"15504563517131057\"]"</span><span class="token punctuation">;</span>
Pattern pattern <span class="token operator">=</span> Pattern<span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">"[0-9]+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Matcher matcher <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 只有matcher.find()为true的时候，才能输出内容</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> </code></pre>
<h4 id="37、枚举的使用"><a href="#37、枚举的使用" class="headerlink" title="37、枚举的使用"></a>37、枚举的使用</h4><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">enum</span> MyEnum <span class="token punctuation">{</span> 
    <span class="token function">VALUE1</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">VALUE2</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">VALUE3</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> Integer value<span class="token punctuation">;</span>

    <span class="token function">MyEnum</span><span class="token punctuation">(</span>Integer value<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 

    <span class="token keyword">public</span> Integer <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 

<span class="token comment" spellcheck="true">// 获取枚举的值</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test1</span> <span class="token punctuation">{</span> 
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>MyEnum<span class="token punctuation">.</span>VALUE1<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> </code></pre>
<h4 id="38、分页查询后将对象封装为vo"><a href="#38、分页查询后将对象封装为vo" class="headerlink" title="38、分页查询后将对象封装为vo"></a>38、分页查询后将对象封装为vo</h4><p>使用<code>convert()</code>方法</p>
<pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> IPage<span class="token operator">&lt;</span>ReceivableSearchItem<span class="token operator">></span> <span class="token function">search</span><span class="token punctuation">(</span>Page<span class="token operator">&lt;</span>ReceivableSearchItem<span class="token operator">></span> page<span class="token punctuation">,</span>
                                          Collection<span class="token operator">&lt;</span>SearchQuery<span class="token operator">></span> queries<span class="token punctuation">,</span>
                                          Collection<span class="token operator">&lt;</span>SearchQuery<span class="token operator">></span> groups<span class="token punctuation">,</span>
                                          Collection<span class="token operator">&lt;</span>SearchQuery<span class="token operator">></span> orders<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token function">commonDefaultHandle</span><span class="token punctuation">(</span>queries<span class="token punctuation">,</span> groups<span class="token punctuation">,</span> orders<span class="token punctuation">)</span><span class="token punctuation">;</span>
    IPage<span class="token operator">&lt;</span>ReceivableSearchItem<span class="token operator">></span> result <span class="token operator">=</span> <span class="token function">commonSearch</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> queries<span class="token punctuation">,</span> groups<span class="token punctuation">,</span> orders<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">.</span><span class="token function">convert</span><span class="token punctuation">(</span>ReceivableSearchItemView<span class="token operator">:</span><span class="token operator">:</span>from<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> </code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20220105100646179.png" alt="image-20220105100646179" loading="lazy"></p>
<h4 id="39、LocalDate格式化"><a href="#39、LocalDate格式化" class="headerlink" title="39、LocalDate格式化"></a>39、LocalDate格式化</h4><pre class=" language-java"><code class="language-java">LocalDate date <span class="token operator">=</span> LocalDate<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

date<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>DateTimeFormatter<span class="token punctuation">.</span>ISO_DATE<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="40、Java请求"><a href="#40、Java请求" class="headerlink" title="40、Java请求"></a>40、Java请求</h4><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 封装请求参数</span>
QueryParam params <span class="token operator">=</span> QueryParam<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> u8code<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"toAccount"</span><span class="token punctuation">,</span> toAccount<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"accountNo"</span><span class="token punctuation">,</span>subject<span class="token punctuation">)</span><span class="token punctuation">;</span>
Request request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span><span class="token function">catURL</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 进行请求</span>
OkHttpClient client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OkHttpClient<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment" spellcheck="true">//设置读取超时时间</span>
            <span class="token punctuation">.</span><span class="token function">readTimeout</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> TimeUnit<span class="token punctuation">.</span>MINUTES<span class="token punctuation">)</span>
            <span class="token comment" spellcheck="true">//设置写的超时时间</span>
            <span class="token punctuation">.</span><span class="token function">writeTimeout</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> TimeUnit<span class="token punctuation">.</span>MINUTES<span class="token punctuation">)</span>
            <span class="token comment" spellcheck="true">//设置连接超时时间</span>
            <span class="token punctuation">.</span><span class="token function">connectTimeout</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> TimeUnit<span class="token punctuation">.</span>MINUTES<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
String body <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">newCall</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="41、获取月初或者月末"><a href="#41、获取月初或者月末" class="headerlink" title="41、获取月初或者月末"></a>41、获取月初或者月末</h4><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 获取月初</span>
LocalDate first <span class="token operator">=</span> LocalDate<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">with</span><span class="token punctuation">(</span>TemporalAdjusters<span class="token punctuation">.</span><span class="token function">firstDayOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 获取这个月最后一天的日期对象</span>
LocalDate last <span class="token operator">=</span> LocalDate<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">with</span><span class="token punctuation">(</span>TemporalAdjusters<span class="token punctuation">.</span><span class="token function">lastDayOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="2、前端内容"><a href="#2、前端内容" class="headerlink" title="2、前端内容"></a>2、前端内容</h3><h4 id="1、SCSS的基本内容"><a href="#1、SCSS的基本内容" class="headerlink" title="1、SCSS的基本内容"></a>1、SCSS的基本内容</h4><ol>
<li><p>Sass就是css的预处理器，Scss是Sass3版本中引入的新语法特性</p>
</li>
<li><p>vue中使用scss，安装：</p>
<pre class=" language-bash"><code class="language-bash">cnpm i -S node-sass sass-loader</code></pre>
</li>
<li><p>使用方法：</p>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style language-css">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>
</li>
<li><p>支持定义变量，内容嵌套等内容</p>
</li>
</ol>
<p>参考文章：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_40323256/article/details/109138173">https://blog.csdn.net/qq_40323256/article/details/109138173</a></p>
<p>中文文档：<a target="_blank" rel="noopener" href="https://www.sass.hk/docs/">https://www.sass.hk/docs/</a></p>
<h4 id="2、切换分支"><a href="#2、切换分支" class="headerlink" title="2、切换分支"></a>2、切换分支</h4><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> checkout <span class="token punctuation">[</span>分支名<span class="token punctuation">]</span></code></pre>
<h4 id="3、Vue的8个钩子函数"><a href="#3、Vue的8个钩子函数" class="headerlink" title="3、Vue的8个钩子函数"></a>3、Vue的8个钩子函数</h4><ol>
<li>beforeCreate：创建前执行</li>
<li>created：创建后执行</li>
<li>beforeMount：挂在前执行</li>
<li>Mount：挂在后执行</li>
<li>beforeUpdate：data() 中的数据更新前执行</li>
<li>updated：data() 中的数据更新后执行</li>
<li>beforeDestory：销毁前执行</li>
<li>destoryed：销毁后执行</li>
</ol>
<p><img src="https://cn.vuejs.org/images/lifecycle.png" alt="Vue 实例生命周期" loading="lazy"></p>
<h4 id="4、Vue修改引用对象的属性值"><a href="#4、Vue修改引用对象的属性值" class="headerlink" title="4、Vue修改引用对象的属性值"></a>4、Vue修改引用对象的属性值</h4><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// 定义一个引用对象</span>
<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">return</span> <span class="token punctuation">{</span> 
        peple<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span> 
                name<span class="token punctuation">:</span> <span class="token string">'小明'</span><span class="token punctuation">,</span>
                age<span class="token punctuation">:</span> <span class="token number">18</span>
            <span class="token punctuation">}</span> <span class="token punctuation">,</span><span class="token punctuation">{</span> 
                name<span class="token punctuation">:</span> <span class="token string">'小红'</span><span class="token punctuation">,</span>
                age<span class="token punctuation">:</span> <span class="token number">19</span>
            <span class="token punctuation">}</span> 
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 

<span class="token comment" spellcheck="true">// 需要在一个函数中修改小明的年龄</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>peple<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">19</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 这样可以修改 data() 中的数据，但是&lt;templete>中的内容不一定会跟着改变</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$<span class="token keyword">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>peple<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> age<span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 这样既可以修改 data() 中的数据，也可以让渲染的内容随着更新</span></code></pre>
<h4 id="5、Chrome浏览器安装Vue插件"><a href="#5、Chrome浏览器安装Vue插件" class="headerlink" title="5、Chrome浏览器安装Vue插件"></a>5、Chrome浏览器安装Vue插件</h4><ol>
<li><p>打开Github地址：<strong><a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-devtools/tree/v5.1.1">https://github.com/vuejs/vue-devtools/tree/v5.1.1</a></strong></p>
</li>
<li><p>下载压缩包到本地，然后解压</p>
</li>
<li><p>在文件路径下执行如下命令</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span>
<span class="token function">npm</span> run build</code></pre>
</li>
<li><p>然后进入<code>shell -&gt; chrome</code>目录，修改<code>manifest.json</code>文件，将persistent设置为true即可</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211018170824438.png" alt="image-20211018170824438" loading="lazy"></p>
</li>
<li><p>在chrome浏览器中选择<code>chrome</code>文件进行导入插件</p>
</li>
<li><p>打开使用<code>Vue</code>框架搭建的项目即可看到插件图标被点亮</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211018171023096.png" alt="image-20211018171023096" loading="lazy"></p>
</li>
<li><p>打开开发者模式就可以查看Vue的一些信息了（不过可能是b站的vue文件经过打包了，看不到下方信息）</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211018171135474.png" alt="image-20211018171135474" loading="lazy"></p>
</li>
</ol>
<h4 id="6、1-0-9-不等于-0-1-的问题"><a href="#6、1-0-9-不等于-0-1-的问题" class="headerlink" title="6、1 - 0.9 不等于 0.1 的问题"></a>6、1 - 0.9 不等于 0.1 的问题</h4><blockquote>
<p>  分析</p>
</blockquote>
<p>因为精度问题，js所有的数字都是以IEEE-754标准格式表示的。所以比如 1.1，其程序实际上无法真正的表示 ‘1.1’，而只能做到一定程度上的准确，这是无法避免的精度丢失：1.09999999999999999。</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211018171616013.png" alt="image-20211018171616013" loading="lazy"></p>
<p>所以就会导致一些神奇的现象</p>
<pre class=" language-js"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token operator">-</span><span class="token number">0.9</span> <span class="token operator">==</span> <span class="token number">0.1</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token operator">-</span><span class="token number">0.8</span> <span class="token operator">==</span> <span class="token number">0.2</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token operator">-</span><span class="token number">0.7</span> <span class="token operator">==</span> <span class="token number">0.3</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//false</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">=</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token operator">-</span><span class="token number">0.6</span> <span class="token operator">==</span> <span class="token number">0.4</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token operator">-</span><span class="token number">0.5</span> <span class="token operator">==</span> <span class="token number">0.5</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token operator">-</span><span class="token number">0.4</span> <span class="token operator">==</span> <span class="token number">0.6</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token operator">-</span><span class="token number">0.3</span> <span class="token operator">==</span> <span class="token number">0.7</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token operator">-</span><span class="token number">0.2</span> <span class="token operator">==</span> <span class="token number">0.8</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token operator">-</span><span class="token number">0.1</span> <span class="token operator">==</span> <span class="token number">0.9</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//true</span></code></pre>
<blockquote>
<p>  方法</p>
</blockquote>
<p><strong>方法一：</strong></p>
<ul>
<li><p>将小数的计算变为整数计算</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211018172004596.png" alt="image-20211018172004596" loading="lazy"></p>
</li>
</ul>
<p><strong>方法二：</strong></p>
<ul>
<li><p>使用<code>toFixed</code>进行四舍五入</p>
<pre class=" language-js"><code class="language-js"><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token number">0.9</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 保留小数点后两位</span></code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211018172151099.png" alt="image-20211018172151099" loading="lazy"></p>
</li>
</ul>
<h4 id="7、安装淘宝镜像cnpm"><a href="#7、安装淘宝镜像cnpm" class="headerlink" title="7、安装淘宝镜像cnpm"></a>7、安装淘宝镜像cnpm</h4><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> -g cnpm -registry<span class="token operator">=</span>https://registry.npm.taobao.org</code></pre>
<h4 id="8、使用npm删除文件"><a href="#8、使用npm删除文件" class="headerlink" title="8、使用npm删除文件"></a>8、使用npm删除文件</h4><p>安装工具</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> rimraf -g</code></pre>
<p>删除文件</p>
<pre class=" language-bash"><code class="language-bash">rimraf node_modules</code></pre>
<h4 id="9、错误收集"><a href="#9、错误收集" class="headerlink" title="9、错误收集"></a>9、错误收集</h4><blockquote>
<p>  cnpm问题</p>
</blockquote>
<pre class=" language-tex"><code class="language-tex">cnpm : 无法加载文件 C:\Users\oor\AppData\Roaming\npm\cnpm.ps1，因为在此系统上禁止运行脚本。...</code></pre>
<p>搜索PowerShell以管理员身份运行</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/format,png.png" alt="img" loading="lazy"></p>
<p>输入set-ExecutionPolicy RemoteSigned，选择Y 或者A ，就好了</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/文档/笔记/个人文件/日常记录.assets/format,png.png" alt="img" loading="lazy"></p>
<h4 id="10、Vue父组件调用子组件方法"><a href="#10、Vue父组件调用子组件方法" class="headerlink" title="10、Vue父组件调用子组件方法"></a>10、Vue父组件调用子组件方法</h4><ol>
<li><p>在子组件上增加<code>ref</code>属性</p>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logs-tab-pane</span> <span class="token attr-name">:id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>current.id + <span class="token punctuation">'</span><span class="token punctuation">'</span><span class="token punctuation">"</span></span> <span class="token attr-name">:type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>logType<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>logsTab<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logs-tab-pane</span><span class="token punctuation">></span></span></code></pre>
</li>
<li><p>直接调用子组件方法</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>logsTab<span class="token punctuation">.</span><span class="token function">getLogs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
<li><p>不过这样子调用可能会出现数据滞后的问题，也就是<code>getlog()</code>方法使用的 id 还是上一次传进去的值</p>
</li>
<li><p>使用异步更新方法</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>logsTab<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token comment" spellcheck="true">// $nextTick 可以进行异步更新，</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> 
        <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>logsTab<span class="token punctuation">.</span><span class="token function">getLogs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> </code></pre>
</li>
</ol>
<h4 id="11、ajax设置请求头"><a href="#11、ajax设置请求头" class="headerlink" title="11、ajax设置请求头"></a>11、ajax设置请求头</h4><pre class=" language-js"><code class="language-js"><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
    url<span class="token punctuation">:</span> <span class="token string">'/pc/logistics/cost/submitDingAudit'</span><span class="token punctuation">,</span>
    method<span class="token punctuation">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
    beforeSend<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        request<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'contentType'</span><span class="token punctuation">,</span> <span class="token string">'application/json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token punctuation">,</span>
    data<span class="token punctuation">:</span> params
<span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token comment" spellcheck="true">// 请求成功的处理</span>
    <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> 
        <span class="token keyword">const</span> <span class="token punctuation">{</span>  msg <span class="token punctuation">}</span>  <span class="token operator">=</span> res<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token punctuation">,</span>
    <span class="token comment" spellcheck="true">// 请求失败的处理</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> 
        <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="12、vue的change事件携带参数"><a href="#12、vue的change事件携带参数" class="headerlink" title="12、vue的change事件携带参数"></a>12、vue的change事件携带参数</h4><pre class=" language-html"><code class="language-html">@change="selectCustomer($event, item)"</code></pre>
<h4 id="13、vuex发送请求"><a href="#13、vuex发送请求" class="headerlink" title="13、vuex发送请求"></a>13、vuex发送请求</h4><p>1、在<code>store</code>目录下分别创建两个对应的.js文件</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211130163019178.png" alt="image-20211130163019178" loading="lazy"></p>
<p>2、在<code>modules</code>目录下的js文件编写功能代码</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ajax <span class="token keyword">from</span> <span class="token string">'@/utils/ajax'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> Types <span class="token keyword">from</span> <span class="token string">'@/store/types/index'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span> 
    state<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token punctuation">,</span>

    mutations<span class="token punctuation">:</span> <span class="token punctuation">{</span> 
        <span class="token punctuation">[</span>Types<span class="token punctuation">.</span>UPDATE_TRANSPORT2_STATE<span class="token punctuation">]</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> payload<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> payload<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> payload<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                    Vue<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> key<span class="token punctuation">,</span> payload<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> 
            <span class="token punctuation">}</span> 
        <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span> <span class="token punctuation">,</span>

    actions<span class="token punctuation">:</span> <span class="token punctuation">{</span> 
        <span class="token punctuation">[</span>Types<span class="token punctuation">.</span>GET_TRANSPORT2_DETAIL<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  commit <span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token punctuation">{</span>  transportId <span class="token punctuation">}</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            <span class="token keyword">return</span> <span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
                url<span class="token punctuation">:</span> <span class="token string">'/pc/logistics/transport/getDetail'</span><span class="token punctuation">,</span>
                method<span class="token punctuation">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
                data<span class="token punctuation">:</span> <span class="token punctuation">{</span>  id<span class="token punctuation">:</span> transportId <span class="token punctuation">}</span> 
            <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
                <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> 
                    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token punctuation">,</span>
                <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> 
                    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> 
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> </code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211130163131989.png" alt="image-20211130163131989" loading="lazy"></p>
<p>3、在<code>types</code>目录下的js文件编写action事件</p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">/* mutation */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> UPDATE_TRANSPORT2_STATE <span class="token operator">=</span> <span class="token string">'UPDATE_TRANSPORT2_STATE'</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">/* action */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> GET_TRANSPORT2_DETAIL <span class="token operator">=</span> <span class="token string">'GET_TRANSPORT2_DETAIL'</span><span class="token punctuation">;</span></code></pre>
<p>4、在<code>types</code>目录下的<code>index.js</code>中引入文件</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211130163425803.png" alt="image-20211130163425803" loading="lazy"></p>
<p>5、在<code>modules</code>目录下的<code>index.js</code>文件暴露这个vuex</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211130163543089.png" alt="image-20211130163543089" loading="lazy"></p>
<h4 id="14、数值格式化"><a href="#14、数值格式化" class="headerlink" title="14、数值格式化"></a>14、数值格式化</h4><pre class=" language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">formatPrice</span><span class="token punctuation">(</span>money<span class="token punctuation">,</span> zeroNumber <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">let</span> s <span class="token operator">=</span> money<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span>zeroNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">/**正则判断**/</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token regex">/\d{ 4} (\.|,)/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        s <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(\d)(\d{ 3} (\.|,))/</span><span class="token punctuation">,</span> <span class="token string">"$1,$2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/**每隔3位添加一个**/</span>
    <span class="token punctuation">}</span> 
    <span class="token keyword">return</span> s<span class="token punctuation">;</span>
<span class="token punctuation">}</span> </code></pre>
<h4 id="15、vscode识别不到npm"><a href="#15、vscode识别不到npm" class="headerlink" title="15、vscode识别不到npm"></a>15、vscode识别不到npm</h4><p>场景：在vscode中无法识别npm，而在外面的终端中可以输出npm信息</p>
<p>原因：这是在安装vscode之后就打开了它的终端，所以每次进入都是那个终端，所以无法识别到后来安装的nodejs</p>
<p>解决方法：直接重新打开一个vscode的终端即可</p>
<h4 id="16、node-sass-安装失败"><a href="#16、node-sass-安装失败" class="headerlink" title="16、node-sass 安装失败"></a>16、node-sass 安装失败</h4><blockquote>
<p>依次执行下方命令即可</p>
</blockquote>
<p>npm uninstall node-sass<br>npm i node-sass –sass_binary_site=<a target="_blank" rel="noopener" href="https://npm.taobao.org/mirrors/node-sass/">https://npm.taobao.org/mirrors/node-sass/</a></p>
<h3 id="3、运维内容"><a href="#3、运维内容" class="headerlink" title="3、运维内容"></a>3、运维内容</h3><h4 id="1、修改文件权限"><a href="#1、修改文件权限" class="headerlink" title="1、修改文件权限"></a>1、修改文件权限</h4><pre class=" language-bash"><code class="language-bash"><span class="token function">chmod</span> 777 <span class="token punctuation">[</span>文件名<span class="token punctuation">]</span></code></pre>
<h4 id="2、使用Nginx配置证书"><a href="#2、使用Nginx配置证书" class="headerlink" title="2、使用Nginx配置证书"></a>2、使用Nginx配置证书</h4><blockquote>
<p>  参考网站：<a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/98728.html?spm=5176.14113079.help.dexternal.565056a7K64XeI#section-ydh-4qb-1gb">https://help.aliyun.com/document_detail/98728.html?spm=5176.14113079.help.dexternal.565056a7K64XeI#section-ydh-4qb-1gb</a></p>
</blockquote>
<ol>
<li><p>下载证书</p>
</li>
<li><p>将证书上传到服务器上，一般与配置文件同级目录下创建 cert 文件夹</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210818175143017.png" alt="image-20210818175143017" loading="lazy"></p>
<p>查询文件位置的方式</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> nginx</code></pre>
</li>
<li><p>修改配置文件，一般在conf文件下</p>
<pre class=" language-bash"><code class="language-bash">http <span class="token punctuation">{</span> 
    upstream jweb_tl_data <span class="token punctuation">{</span> 
        server 10.104.194.110:9007<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 

    server <span class="token punctuation">{</span> 
        listen 80<span class="token punctuation">;</span>
        listen <span class="token punctuation">[</span>::<span class="token punctuation">]</span>:80<span class="token punctuation">;</span>
        server_name <span class="token punctuation">[</span>网站域名<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> 301 https://<span class="token punctuation">[</span>网站域名<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true"># 配置重定向</span>
    <span class="token punctuation">}</span> 

    server <span class="token punctuation">{</span> 
        listen                 443 ssl<span class="token punctuation">;</span>
        server_name            <span class="token punctuation">[</span>网站域名<span class="token punctuation">]</span><span class="token punctuation">;</span>
        index                  index.html<span class="token punctuation">;</span>    

        <span class="token function">gzip</span>             on<span class="token punctuation">;</span>
        gzip_min_length  1k<span class="token punctuation">;</span>
        gzip_comp_level  5<span class="token punctuation">;</span>
        gzip_types       text/plain application/x-javascript text/css application/xml application/javascript application/json<span class="token punctuation">;</span>

        ssl_certificate <span class="token punctuation">[</span>证书文件 .crt<span class="token operator">=</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        ssl_certificate_key <span class="token punctuation">[</span>证书密钥文件 .key<span class="token punctuation">]</span><span class="token punctuation">;</span>

        ssi on<span class="token punctuation">;</span>
        ssi_silent_errors on<span class="token punctuation">;</span>
        ssi_types text/shtml<span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true"># 主页访问地址，因为使用的是静态的html网页，所以直接使用location就可以完成了。</span>
        location / <span class="token punctuation">{</span> 
            <span class="token comment" spellcheck="true"># 文件夹</span>
            root /usr/local/xiaojiang/webstatic/<span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true"># 主页文件</span>
            index index.html<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> </code></pre>
</li>
<li><p>重启Nginx服务</p>
<pre class=" language-bash"><code class="language-bash">./nginx -s reload </code></pre>
</li>
</ol>
<blockquote>
<p>  报错：</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash">nginx: <span class="token punctuation">[</span>emerg<span class="token punctuation">]</span> the <span class="token string">"ssl"</span> parameter requires ngx_http_ssl_module <span class="token keyword">in</span> /usr/local/nginx/conf/conf.d/myweb_beta.conf:13</code></pre>
<p>这是因为ssl模块并未被安装</p>
<h4 id="3、拷贝文件夹"><a href="#3、拷贝文件夹" class="headerlink" title="3、拷贝文件夹"></a>3、拷贝文件夹</h4><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 需要加上-r</span>
<span class="token function">cp</span> -r <span class="token punctuation">[</span>文件夹<span class="token punctuation">]</span> <span class="token punctuation">[</span>目的地<span class="token punctuation">]</span></code></pre>
<h4 id="4、新的测试环境搭建"><a href="#4、新的测试环境搭建" class="headerlink" title="4、新的测试环境搭建"></a>4、新的测试环境搭建</h4><blockquote>
<p>  环境配置</p>
</blockquote>
<ul>
<li>JDK<ol>
<li>安装命令：<code>yum install java-1.8.0-openjdk.x86_64</code></li>
<li>检测命令：<code>java -version</code></li>
</ol>
</li>
<li>Maven<ol>
<li>安装命令：<code>yum install maven</code></li>
<li>检测命令：<code>mvn -v</code></li>
</ol>
</li>
<li>Node<ol>
<li>安装命令：<code>yum install nodejs</code></li>
<li>检测命令：<code>npm -v</code></li>
</ol>
</li>
<li>pm2<ol>
<li>前置条件：需要安装 <strong>Node</strong></li>
<li>安装命令：<code>npm install pm2 -g</code></li>
</ol>
</li>
</ul>
<blockquote>
<p>  后端配置</p>
</blockquote>
<ol>
<li><p>克隆后端项目</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> /usr/local/jweb
<span class="token function">git</span> clone https://codeup.aliyun.com/5fb25659e89148238ce80ead/tailiang/jweb_tl_pms.git jweb_tl_pms2</code></pre>
</li>
<li><p>拷贝 <code>build.sh</code> 、 <code>jmxremote</code> 、 <code>java_pid4845.hprof</code>和 <code>.mvn</code>文件</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> /usr/local/jweb/jweb_tl_pms

<span class="token function">cp</span> -r build.sh <span class="token punctuation">..</span>/jweb_tl_pms_test/
<span class="token function">cp</span> -r jmxremote <span class="token punctuation">..</span>/jweb_tl_pms_test
<span class="token function">cp</span> -r java_pid4845.hprof <span class="token punctuation">..</span>/jweb_tl_pms_test 
<span class="token function">cp</span> -r .mvn <span class="token punctuation">..</span>/jweb_tl_pms_test</code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210923091031868.png" alt="image-20210923091031868" loading="lazy"></p>
</li>
<li><p>赋予 <code>mvnw</code> 权限</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">chmod</span> 777 mvnw</code></pre>
</li>
<li><p>创建日志存放目录以及软连接</p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 创建日志目录</span>
<span class="token function">cd</span> /data/jweblog
<span class="token function">mkdir</span> jweb_tl_pms2
<span class="token function">cd</span> jweb_tl_pms2
<span class="token function">mkdir</span> access

<span class="token comment" spellcheck="true"># 创建软链接</span>
<span class="token function">cd</span> /usr/local/jweb/jweb_tl_pms2
<span class="token function">ln</span> -s /data/jweblog/jweb_tl_pms2 logs</code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210923102931778.png" alt="image-20210923102931778" loading="lazy"></p>
</li>
<li><p>创建备份文件目录</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> /data/backup
<span class="token function">mkdir</span> jweb_pms2</code></pre>
</li>
</ol>
<blockquote>
<p>  修改配置文件</p>
</blockquote>
<ol>
<li><p>修改<code>build.sh</code>文件，只需要修改备份文件位置，和pm2的应用名称</p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 拉取最新代码</span>
<span class="token comment" spellcheck="true"># git pull https://gitee.com/tailiang/jweb_tl_pms.git</span>
<span class="token function">git</span> pull

<span class="token comment" spellcheck="true"># 删除1天以前备份文件(修改)</span>
location<span class="token operator">=</span><span class="token string">"/data/backup/jweb_pms2/"</span>
fileName<span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> +%Y%m%d%H%M%S<span class="token variable">`</span></span>
path<span class="token operator">=</span><span class="token string">"<span class="token variable">${ location}</span> <span class="token variable">${ fileName}</span> .jar"</span>
<span class="token comment" spellcheck="true"># echo "start copy to ${ path}  !"</span>
<span class="token function">find</span> <span class="token variable">$location</span> -mtime +1 -type f <span class="token operator">|</span><span class="token function">xargs</span> <span class="token function">rm</span> -f

<span class="token comment" spellcheck="true"># 备份.jar文件</span>
<span class="token function">cp</span> ./target/*.jar <span class="token variable">${ path}</span> 

<span class="token comment" spellcheck="true"># 打包和重启(修改)</span>
./mvnw clean package -Dmaven.test.skip<span class="token operator">=</span>true
pm2 restart jweb_tl_pms2</code></pre>
</li>
<li><p>修改<code>pm2.json</code>文件</p>
<pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span> 
        // 应用名称
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"jweb_tl_pms2"</span><span class="token punctuation">,</span>

        <span class="token property">"script"</span><span class="token operator">:</span> <span class="token string">"/usr/bin/java"</span><span class="token punctuation">,</span>

        // 设置项目启动的参数，需要修改active
        <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">"-Xms128m"</span><span class="token punctuation">,</span>
                <span class="token string">"-Xmx512m"</span><span class="token punctuation">,</span>
                <span class="token string">"-XX:PermSize=128m"</span><span class="token punctuation">,</span>
                <span class="token string">"-XX:MaxNewSize=256m"</span><span class="token punctuation">,</span>
                <span class="token string">"-XX:MaxPermSize=128m"</span><span class="token punctuation">,</span>
                <span class="token string">"-XX:+HeapDumpOnOutOfMemoryError"</span><span class="token punctuation">,</span>
                <span class="token string">"-XX:+UseParallelGC"</span><span class="token punctuation">,</span>
                <span class="token string">"-XX:+UseParallelOldGC"</span><span class="token punctuation">,</span>
                <span class="token string">"-jar"</span><span class="token punctuation">,</span>
                <span class="token string">"target/jweb_tl_pms-1.0.0-SNAPSHOT.jar"</span><span class="token punctuation">,</span>
                <span class="token string">"--spring.profiles.active=beta2"</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>

        <span class="token property">"exec_interpreter"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>

        <span class="token property">"exec_mode"</span><span class="token operator">:</span> <span class="token string">"fork"</span>
<span class="token punctuation">}</span> 
</code></pre>
</li>
<li><p>修改<code>.git</code>的<code>config</code>文件，否则其他人无法进行git操作</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> /usr/local/jweb/jweb_tl_pms
<span class="token function">cp</span> .git/config <span class="token punctuation">..</span>/jweb_tl_pms2/.git</code></pre>
</li>
</ol>
<blockquote>
<p>  项目配置—IDEA</p>
</blockquote>
<ol>
<li><p>增加配置文件 <code>application-test.yml</code>，并复制粘贴上beta的文件内容，然后修改服务端口，增加配置日志，关闭定时任务</p>
<pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true"># 修改服务端口</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">address</span><span class="token punctuation">:</span> 0.0.0.0
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9012</span>

<span class="token comment" spellcheck="true"># 修改注册中心端口，-1为随机分配</span>
<span class="token key atrule">dubbo</span><span class="token punctuation">:</span>
  <span class="token key atrule">protocol</span><span class="token punctuation">:</span>
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">-1</span>

<span class="token comment" spellcheck="true"># 配置日志文件</span>
<span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">config</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>logback<span class="token punctuation">-</span>beta2.xml</code></pre>
</li>
<li><p>创建日志文件<code>logback-test.xml</code>，复制粘贴<code>logback.xml</code>的内容，然后修改<code>path</code>路径</p>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>path<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/data/jweblog/jweb_tl_pms2<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre>
</li>
<li><p>将项目上传到云效上</p>
</li>
</ol>
<blockquote>
<p>  服务器启动</p>
</blockquote>
<ol>
<li><p>打包项目</p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 打包并跳过测试（因为测试时间好长啊啊啊）</span>
mvn package -Dmaven.test.skip<span class="token operator">=</span>true</code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210923094809049.png" alt="image-20210923094809049" loading="lazy"></p>
</li>
<li><p>拉取最新代码</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> pull</code></pre>
</li>
<li><p>启动pm2项目</p>
<pre class=" language-bash"><code class="language-bash">pm2 start pm2.json </code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210923094840861.png" alt="image-20210923094840861" loading="lazy"></p>
</li>
<li><p>此致，后面的更新均可直接执行<code>sh builid.sh</code></p>
</li>
</ol>
<blockquote>
<p>  前端配置</p>
</blockquote>
<ol>
<li><p>配置<code>nginx</code>配置文件，复制粘贴<code>tl_pms.conf</code>文件内容</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> /etc/nginx/conf.d

<span class="token function">touch</span> tl_pms2.conf</code></pre>
</li>
<li><p>修改配置文件</p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 配置项目端口</span>
upstream jweb_tl_pms <span class="token punctuation">{</span> 
    server 127.0.0.1:9012<span class="token punctuation">;</span>
<span class="token punctuation">}</span> 

server <span class="token punctuation">{</span> 
    <span class="token comment" spellcheck="true"># 设置域名</span>
    server_name          beta2.pms.tailiangwx.com<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true"># 修改前端项目的存放路径</span>
    location <span class="token operator">=</span>/ <span class="token punctuation">{</span> 
        root /data/webstatic/pms2/<span class="token punctuation">;</span>
        index index.html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
    ……
<span class="token punctuation">}</span> </code></pre>
</li>
<li><p>创建前端目录</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> /data/webstatic
<span class="token function">mkdir</span> pms2</code></pre>
</li>
<li><p>拷贝<code>dingh5</code>文件夹到目录下</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> /data/webstatic/pms
<span class="token function">cp</span> -r ./dingh5 <span class="token punctuation">..</span>/pms2</code></pre>
</li>
</ol>
<blockquote>
<p>  前端项目配置——VsCode</p>
</blockquote>
<ol>
<li><p>修改<code>package.json</code>文件，增加test打包方式</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210923103246450.png" alt="image-20210923103246450" loading="lazy"></p>
</li>
<li><p>在<code>config</code>目录下创建<code>beta2.env.js</code>文件</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210923103333327.png" alt="image-20210923103333327" loading="lazy"></p>
</li>
<li><p>然后执行<code>npm run beta2</code>即可打包，打包之后将文件上传到<code>/data/webstatic/pms2</code>目录即可</p>
</li>
<li><p>最后如果修改<code>nginx</code>配置文件，需要执行重启即可</p>
<pre class=" language-bash"><code class="language-bash">./nginx -s reload </code></pre>
</li>
</ol>
<h4 id="5、windows怎么关闭指定端口服务"><a href="#5、windows怎么关闭指定端口服务" class="headerlink" title="5、windows怎么关闭指定端口服务"></a>5、windows怎么关闭指定端口服务</h4><blockquote>
<p>  查看所有端口</p>
</blockquote>
<ol>
<li><p>查询所有端口服务</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">netstat</span> -ano</code></pre>
</li>
<li><p>关闭对应的pid</p>
<pre class=" language-bash"><code class="language-bash">taskkill /f /pid 15952</code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210929094044130.png" alt="image-20210929094044130" loading="lazy"></p>
</li>
</ol>
<blockquote>
<p>  查看指定端口</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token function">netstat</span> -aon<span class="token operator">|</span>findstr <span class="token string">"9002"</span>

taskkill /f /pid 20952</code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211215113618378.png" alt="image-20211215113618378" loading="lazy"></p>
<h4 id="6、查询文件位置"><a href="#6、查询文件位置" class="headerlink" title="6、查询文件位置"></a>6、查询文件位置</h4><p>查询所有包含nginx的文件名字位置</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">find</span> / -name nginx</code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210929221029563.png" alt="image-20210929221029563" loading="lazy"></p>
<h4 id="7、nginx配置环境变量"><a href="#7、nginx配置环境变量" class="headerlink" title="7、nginx配置环境变量"></a>7、nginx配置环境变量</h4><p>1）-bash:nginx:未找到命令（command not found）说明nginx还没有配置到环境变量里</p>
<pre class=" language-undefined"><code class="language-undefined">vi /etc/profile</code></pre>
<p>2）在文件最后加入一行代码（根据自己的安装目录填写）</p>
<pre class=" language-ruby"><code class="language-ruby">export <span class="token constant">PATH</span><span class="token operator">=</span><span class="token variable">$PATH</span><span class="token punctuation">:</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>nginx<span class="token operator">/</span>sbin</code></pre>
<p>3）刷新配置文件/etc/profile</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">source</span> /etc/profile</code></pre>
<h4 id="8、查看端口使用情况"><a href="#8、查看端口使用情况" class="headerlink" title="8、查看端口使用情况"></a>8、查看端口使用情况</h4><pre class=" language-bash"><code class="language-bash"><span class="token function">netstat</span> -anp<span class="token operator">|</span><span class="token function">grep</span> 8000</code></pre>
<h4 id="9、配置服务器"><a href="#9、配置服务器" class="headerlink" title="9、配置服务器"></a>9、配置服务器</h4><blockquote>
<p>  安装Nginx</p>
</blockquote>
<p>1、下载安装包：<a target="_blank" rel="noopener" href="http://nginx.org/en/download.html">http://nginx.org/en/download.html</a></p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211111101446650.png" alt="image-20211111101446650" loading="lazy"></p>
<p>2、将安装包上传到服务器的<code>/etc/nginx</code>目录下，然后执行</p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 解压文件</span>
<span class="token function">tar</span> -zxvf nginx-1.20.1.tar.gz

<span class="token comment" spellcheck="true"># 进入nginx目录</span>
<span class="token function">cd</span> nginx-1.20.1

<span class="token comment" spellcheck="true"># 开始安装，依次执行下方指令</span>
./configure --prefix<span class="token operator">=</span>/etc/nginx --conf-path<span class="token operator">=</span>/etc/nginx/nginx.conf
<span class="token function">make</span>
<span class="token function">make</span> <span class="token function">install</span></code></pre>
<blockquote>
<p>  安装Redis</p>
</blockquote>
<p>1、下载安装包：<a target="_blank" rel="noopener" href="https://redis.io/">https://redis.io/</a></p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211111101912849.png" alt="image-20211111101912849" loading="lazy"></p>
<p>2、上传到<code>/etc/redis</code>目录下</p>
<p>3、进行解压</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">tar</span> -zxvf redis-6.2.6.tar.gz</code></pre>
<p>4、开始安装</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">make</span> PREFIX<span class="token operator">=</span>/etc/redis <span class="token function">install</span></code></pre>
<p>5、redis配置文件</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> /etc/redis/bin
<span class="token comment" spellcheck="true"># 复制配置文件</span>
<span class="token function">cp</span> -r /etc/redis/redis-6.2.6/redis.conf /etc/redis/bin
<span class="token comment" spellcheck="true"># 修改配置文件</span>
vim redis.conf</code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211111103020505.png" alt="image-20211111103020505" loading="lazy"></p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 修改端口</span>
port 1268

<span class="token comment" spellcheck="true"># 开启后台运行</span>
daemonize <span class="token function">yes</span>

<span class="token comment" spellcheck="true"># 配置密码</span>
requirepass 6DY1k2wWFE6hDG4b</code></pre>
<p>6、启动redis</p>
<pre class=" language-bash"><code class="language-bash">redis-server redis.conf</code></pre>
<ul>
<li>daemonize介绍<ul>
<li>redis.conf配置文件中daemonize守护线程，默认是NO。</li>
<li>daemonize是用来指定redis是否要用守护线程的方式启动。</li>
</ul>
</li>
<li>daemonize 设置yes或者no区别<ul>
<li><code>daemonize:yes</code>:redis采用的是单进程多线程的模式。当redis.conf中选项daemonize设置成yes时，代表开启守护进程模式。在该模式下，redis会在后台运行，并将进程pid号写入至redis.conf选项pidfile设置的文件中，此时redis将一直运行，除非手动kill该进程。</li>
<li><code>daemonize:no</code>: 当daemonize选项设置成no时，当前界面将进入redis的命令行界面，exit强制退出或者关闭连接工具(putty,xshell等)都会导致redis进程退出。</li>
</ul>
</li>
</ul>
<blockquote>
<p>  安装JDK</p>
</blockquote>
<ol>
<li>安装命令：<code>yum install java-1.8.0-openjdk.x86_64</code></li>
<li>检测命令：<code>java -version</code></li>
</ol>
<blockquote>
<p>  安装Maven</p>
</blockquote>
<ol>
<li>安装命令：<code>yum install maven</code></li>
<li>检测命令：<code>mvn -v</code></li>
</ol>
<blockquote>
<p>  安装Node</p>
</blockquote>
<ol>
<li>安装命令：<code>yum install nodejs</code></li>
<li>检测命令：<code>npm -v</code></li>
</ol>
<blockquote>
<p>  安装pm2</p>
</blockquote>
<ol>
<li>前置条件：需要安装 <strong>Node</strong></li>
<li>安装命令：<code>npm install pm2 -g</code></li>
</ol>
<blockquote>
<p>  安装Git</p>
</blockquote>
<ol>
<li>安装命令：<code>yum install git</code></li>
<li>检测命令：<code>git --version</code></li>
</ol>
<blockquote>
<p>  创建用户和证书</p>
</blockquote>
<p>1、创建用户</p>
<pre class=" language-bash"><code class="language-bash">adduser appadmin

<span class="token function">su</span> appadmin</code></pre>
<p>2、生成证书</p>
<pre class=" language-bash"><code class="language-bash">ssh-keygen -t rsa -f ~/.ssh/TL-BETA-02</code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/b4d7961b-a08c-4546-9510-b071738c6681.png" alt="img" loading="lazy"></p>
<p>3、注册公钥</p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 在服务器上注册公钥</span>
<span class="token function">cd</span> ~/appadmin/.ssh
<span class="token function">cat</span> TL-BETA-02.pub <span class="token operator">>></span> authorized_keys

<span class="token comment" spellcheck="true"># ssh 对目录的权限有要求，要设置下新生成的config文件权限才行</span>
<span class="token function">chmod</span> 600 authorized_keys</code></pre>
<p>4、下载密钥</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/a331515a-a1d5-4b55-8a46-74f9dd1b282f.png" alt="img" loading="lazy"></p>
<blockquote>
<p>  在应用中增加Beta4环境</p>
</blockquote>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211222092944562.png" alt="image-20211222092944562" loading="lazy"></p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20220111112224137.png" alt="image-20220111112224137" loading="lazy"></p>
<h3 id="4、Git相关"><a href="#4、Git相关" class="headerlink" title="4、Git相关"></a>4、Git相关</h3><h4 id="1、git修改用户名"><a href="#1、git修改用户名" class="headerlink" title="1、git修改用户名"></a>1、git修改用户名</h4><blockquote>
<p>  查看当前用户信息</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> config user.name</code></pre>
<blockquote>
<p>  全局修改</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> config  --global user.name 用户名

<span class="token function">git</span> config  --global user.email 邮箱名</code></pre>
<blockquote>
<p>  修改当前的 project</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> config user.name 用户名

<span class="token function">git</span> config user.email 邮箱名</code></pre>
<h4 id="2、git-rebase的使用"><a href="#2、git-rebase的使用" class="headerlink" title="2、git rebase的使用"></a>2、git rebase的使用</h4><blockquote>
<p>  Git - 变基</p>
</blockquote>
<p>官方文档：<a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%8F%98%E5%9F%BA">https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%8F%98%E5%9F%BA</a></p>
<p>通过合并操作来整合分叉的历史，你可以提取在 <code>C4</code> 中引入的补丁和修改，然后在 <code>C3</code> 的基础上应用一次。 在 Git 中，这种操作就叫做 <strong>变基（rebase）</strong>。 你可以使用 <code>rebase</code> 命令将提交到某一分支上的所有修改都移至另一分支上，就好像“重新播放”一样。</p>
<p>在这个例子中，你可以检出 <code>experiment</code> 分支，然后将它变基到 <code>master</code> 分支上：</p>
<pre class=" language-bash"><code class="language-bash">$ <span class="token function">git</span> checkout experiment
$ <span class="token function">git</span> rebase master
First, rewinding <span class="token function">head</span> to replay your work on <span class="token function">top</span> of it<span class="token punctuation">..</span>.
Applying: added staged <span class="token function">command</span></code></pre>
<p>它的原理是首先找到这两个分支（即当前分支 <code>experiment</code>、变基操作的目标基底分支 <code>master</code>） 的最近共同祖先 <code>C2</code>，然后对比当前分支相对于该祖先的历次提交，提取相应的修改并存为临时文件， 然后将当前分支指向目标基底 <code>C3</code>, 最后以此将之前另存为临时文件的修改依序应用。</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/basic-rebase-3-16346248957246.png" alt="将 `C4` 中的修改变基到 `C3` 上。" loading="lazy"></p>
<p>在 Git 中整合来自不同分支的修改主要有两种方法：合并<code>merge</code> 以及 变基<code>rebase</code>。</p>
<blockquote>
<p>  变基最新的远端代码</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> rebase remotes/origin/master

<span class="token comment" spellcheck="true"># 或者直接使用</span>
<span class="token function">git</span> pull --rebase origin master</code></pre>
<blockquote>
<p>  Git - 重写历史</p>
</blockquote>
<p>官方文档：<a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E9%87%8D%E5%86%99%E5%8E%86%E5%8F%B2">https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E9%87%8D%E5%86%99%E5%8E%86%E5%8F%B2</a></p>
<p>在使用 Git 时，可能想要修订提交历史。也可以重写已经发生的提交。 这可能涉及改变提交的顺序，改变提交中的信息或修改文件，将提交压缩或是拆分， 或完全地移除提交。</p>
<p>但最好是在将工作成果与他人共享之前进行重写操作，否则修改之后只能进行强推。</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211019143406795.png" alt="image-20211019143406795" loading="lazy"></p>
<blockquote>
<p>  git rebase -i 常用指令</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 修改最近三次提交信息</span>
$ <span class="token function">git</span> rebase -i HEAD~3

<span class="token comment" spellcheck="true"># 修改 a5f4a0d 提交之后的内容</span>
$ <span class="token function">git</span> rebase -i a5f4a0d

<span class="token comment" spellcheck="true"># 查看最近三次提交的信息和短id</span>
$ <span class="token function">git</span> log --pretty<span class="token operator">=</span>format:<span class="token string">"%h %s"</span> HEAD~3<span class="token punctuation">..</span>HEAD</code></pre>
<p>输入以上命令指令之后会在文本编辑器上给你一个提交的列表，不过文本编辑器的内容是反序显示的，即最近一次提交在最下方。</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211019144012224.png" alt="image-20211019144012224" loading="lazy"></p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211019143814095.png" alt="image-20211019143814095" loading="lazy"></p>
<blockquote>
<p>  编辑器指令</p>
</blockquote>
<ul>
<li>pick：保留该commit（缩写:p）</li>
<li>reword：保留该commit，但我需要修改该commit的注释（缩写:r）</li>
<li>edit：保留该commit， 但我要停下来修改该提交(不仅仅修改注释)（缩写:e）</li>
<li>squash：将该commit和前一个commit合并（缩写:s）</li>
<li>fixup：将该commit和前一个commit合并，但我不要保留该提交的注释信息（缩写:f）</li>
<li>exec：执行shell命令（缩写:x）</li>
<li>drop：我要丢弃该commit（缩写:d）</li>
</ul>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211019180441524.png" alt="image-20211019180441524" loading="lazy"></p>
<p>编辑完成之后按<code>Esc</code> 并输入<code>:Wq</code>即可保存退出并执行，如果是使用<code>edit</code>指令，可以将游标移动到指定的位置，进行修改或者添加提交。</p>
<h4 id="3、git修改注释内容"><a href="#3、git修改注释内容" class="headerlink" title="3、git修改注释内容"></a>3、git修改注释内容</h4><blockquote>
<p>  修改最后一次提交的内容</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> commit --amend</code></pre>
<blockquote>
<p>  或者通过 rebase 对之前的进行处理</p>
</blockquote>
<p>选中对应的提交，使用<code>e</code>可以将游标指向该次提交</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211019181012413.png" alt="image-20211019181012413" loading="lazy"></p>
<p>执行<code>git commit --amend</code></p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211019181240032.png" alt="image-20211019181240032" loading="lazy"></p>
<p>最后将游标指向回去即可<code>git rebase --continue</code></p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211019181400986.png" alt="image-20211019181400986" loading="lazy"></p>
<h4 id="4、git-push"><a href="#4、git-push" class="headerlink" title="4、git push"></a>4、git push</h4><blockquote>
<p>  git push 命用于从将本地的分支版本上传到远程并合并</p>
</blockquote>
<p>命令格式如下：</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> push <span class="token operator">&lt;</span>远程主机名<span class="token operator">></span> <span class="token operator">&lt;</span>本地分支名<span class="token operator">></span>:<span class="token operator">&lt;</span>远程分支名<span class="token operator">></span></code></pre>
<p>如果本地分支名与远程分支名相同，则可以省略冒号：</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> push <span class="token operator">&lt;</span>远程主机名<span class="token operator">></span> <span class="token operator">&lt;</span>本地分支名<span class="token operator">></span></code></pre>
<h4 id="5、git-pull"><a href="#5、git-pull" class="headerlink" title="5、git pull"></a>5、git pull</h4><blockquote>
<p>  git pull 命令用于从远程获取代码并合并本地的版本。</p>
</blockquote>
<p>命令格式如下：</p>
<pre><code>git pull &lt;远程主机名&gt; &lt;远程分支名&gt;:&lt;本地分支名&gt;</code></pre>
<p>使用下面的关系区别这两个操作：</p>
<p><code>git pull</code> 相当于 <code>git fetch + git merge</code></p>
<p><code>git pull --rebase</code> 相当于 <code>git fetch + git rebase</code></p>
<p>参考文章：</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/rxbook/p/9341606.html">git merge 和 git rebase 的区别</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/runnerjack/p/9342362.html">git fetch的作用</a></p>
<h4 id="6、git-fetch"><a href="#6、git-fetch" class="headerlink" title="6、git fetch"></a>6、git fetch</h4><blockquote>
<p>  概念</p>
</blockquote>
<p>可以简单的概括为：</p>
<p><code>git fetch</code>是将远程主机的最新内容拉到本地，用户在检查了以后决定是否合并到工作本机分支中。</p>
<p>而<code>git pull</code> 则是将远程主机的最新内容拉下来后直接合并，即：<code>git pull = git fetch + git merge</code>，这样可能会产生冲突，需要手动解决。</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/git.jpg" alt="img" loading="lazy"></p>
<blockquote>
<p>  常用命令</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 这个命令将某个远程主机的更新全部取回本地</span>
$ <span class="token function">git</span> fetch <span class="token operator">&lt;</span>远程主机名<span class="token operator">></span> 

<span class="token comment" spellcheck="true"># 如果只想取回特定分支的更新，可以指定分支名</span>
$ <span class="token function">git</span> fetch <span class="token operator">&lt;</span>远程主机名<span class="token operator">></span> <span class="token operator">&lt;</span>分支名<span class="token operator">></span></code></pre>
<h4 id="7、git-revert"><a href="#7、git-revert" class="headerlink" title="7、git revert"></a>7、git revert</h4><p>git revert 撤销 某次操作，此次操作之前和之后的commit和history都会保留，并且把这次撤销作为一次最新的提交。</p>
<pre class=" language-bash"><code class="language-bash">$ <span class="token function">git</span> revert HEAD^    <span class="token comment" spellcheck="true"># 撤销前一次 commit</span>
$ <span class="token function">git</span> revert <span class="token operator">&lt;</span>SHA-1<span class="token operator">></span>    <span class="token comment" spellcheck="true"># （比如：fa042ce57ebbe5bb9c8db709f719cec2c58ee7ff）撤销指定的版本，撤销也会作为一次提交进行保存。</span></code></pre>
<p>git revert是提交一个新的版本，将需要revert的版本的内容再反向修改回去。</p>
<h4 id="8、git-reset"><a href="#8、git-reset" class="headerlink" title="8、git reset"></a>8、git reset</h4><p>git reset 命令用于回退版本，可以指定退回某一次提交的版本。</p>
<pre class=" language-bash"><code class="language-bash">$ <span class="token function">git</span> reset --hard HEAD^            <span class="token comment" spellcheck="true"># 回退所有内容到上一个版本  </span>
$ <span class="token function">git</span> reset --hard 052e           <span class="token comment" spellcheck="true"># 回退到指定版本</span></code></pre>
<p><strong>HEAD 说明：</strong></p>
<ul>
<li>HEAD 表示当前版本</li>
<li>HEAD^ 上一个版本</li>
<li>HEAD^^ 上上一个版本</li>
<li>HEAD^^^ 上上上一个版本</li>
<li>以此类推…</li>
</ul>
<p>可以使用 ～数字表示</p>
<ul>
<li>HEAD~0 表示当前版本</li>
<li>HEAD~1 上一个版本</li>
<li>HEAD^2 上上一个版本</li>
<li>HEAD^3 上上上一个版本</li>
<li>以此类推…</li>
</ul>
<h4 id="9、git-分支管理"><a href="#9、git-分支管理" class="headerlink" title="9、git 分支管理"></a>9、git 分支管理</h4><blockquote>
<p>  创建分支</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 创建分支</span>
$ <span class="token function">git</span> branch <span class="token operator">&lt;</span>分支名<span class="token operator">></span>

<span class="token comment" spellcheck="true"># 切换分支</span>
$ <span class="token function">git</span> checkout <span class="token operator">&lt;</span>分支名<span class="token operator">></span>

<span class="token comment" spellcheck="true"># 创建并切换到新分支</span>
$ <span class="token function">git</span> checkout -b <span class="token operator">&lt;</span>分支名<span class="token operator">></span></code></pre>
<blockquote>
<p>  查看所有分支</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 查看本地分支</span>
$ <span class="token function">git</span> branch

<span class="token comment" spellcheck="true"># 查看远程分支</span>
$ <span class="token function">git</span> branch -r

<span class="token comment" spellcheck="true"># 查看所有分支</span>
$ <span class="token function">git</span> branch -a</code></pre>
<blockquote>
<p>  删除分支</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 删除本地分支</span>
$ <span class="token function">git</span> branch -d <span class="token operator">&lt;</span>分支名<span class="token operator">></span>、
<span class="token comment" spellcheck="true"># 强制删除</span>
$ <span class="token function">git</span> branch -D <span class="token operator">&lt;</span>分支名<span class="token operator">></span>

<span class="token comment" spellcheck="true"># 删除远端分支</span>
$ <span class="token function">git</span> push origin --delete <span class="token operator">&lt;</span>分支名<span class="token operator">></span></code></pre>
<blockquote>
<p>  分支合并</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 将其他分支合并到当前分支</span>
$ <span class="token function">git</span> merge <span class="token operator">&lt;</span>分支名<span class="token operator">></span></code></pre>
<h4 id="10、merge-和-rebase-的区别"><a href="#10、merge-和-rebase-的区别" class="headerlink" title="10、merge 和 rebase 的区别"></a>10、merge 和 rebase 的区别</h4><blockquote>
<p>  git merge</p>
</blockquote>
<p>git 会自动根据两个分支的共同祖先和两个分支的最新提交进行一个三方合并，然后将合并中修改的内容生成一个新的 commit。</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/2019110519521430.png" alt="在这里插入图片描述" loading="lazy"></p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/basic-rebase-2.png" alt="通过合并操作来整合分叉了的历史。" loading="lazy"></p>
<blockquote>
<p>  git rebase</p>
</blockquote>
<p>首先找到这两个分支（即当前分支 <code>experiment</code>、变基操作的目标基底分支 <code>master</code>） 的最近共同祖先 <code>C2</code>，然后对比当前分支相对于该祖先的历次提交，提取相应的修改并存为临时文件， 然后将当前分支指向目标基底 <code>C3</code>, 最后以此将之前另存为临时文件的修改依序应用。</p>
<p>因此也不会产生新的提交。</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/basic-rebase-3-16347147892832.png" alt="将 `C4` 中的修改变基到 `C3` 上。" loading="lazy"></p>
<h4 id="11、git-cherry-pick"><a href="#11、git-cherry-pick" class="headerlink" title="11、git cherry-pick"></a>11、git cherry-pick</h4><p>用于摘取其他分支上的部分提交。</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/bg2020042723.jpg" alt="img" loading="lazy"></p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 将指定的提交（commit）应用于当前分支</span>
$ <span class="token function">git</span> cherry-pick <span class="token operator">&lt;</span>commitHash<span class="token operator">></span>

<span class="token comment" spellcheck="true"># 摘取多个提交（之间用空格分开）</span>
$ <span class="token function">git</span> cherry-pick <span class="token operator">&lt;</span>HashA<span class="token operator">></span> <span class="token operator">&lt;</span>HashB<span class="token operator">></span>

<span class="token comment" spellcheck="true"># 一系列的连续提交</span>
$ <span class="token function">git</span> cherry-pick A<span class="token punctuation">..</span>B        <span class="token comment" spellcheck="true"># 不包含A</span>
$ <span class="token function">git</span> cherry-pick A^<span class="token punctuation">..</span>B     <span class="token comment" spellcheck="true"># 包含A</span></code></pre>
<blockquote>
<p>  配置项</p>
</blockquote>
<p><code>git cherry-pick</code>命令的常用配置项如下。</p>
<p>（1）<code>-e</code>，<code>--edit</code></p>
<p>打开外部编辑器，编辑提交信息。</p>
<p>（2）<code>-n</code>，<code>--no-commit</code></p>
<p>只更新工作区和暂存区，不产生新的提交。</p>
<p>（3）<code>-x</code></p>
<p>在提交信息的末尾追加一行<code>(cherry picked from commit ...)</code>，方便以后查到这个提交是如何产生的。</p>
<p>（4）<code>-s</code>，<code>--signoff</code></p>
<p>在提交信息的末尾追加一行操作者的签名，表示是谁进行了这个操作。</p>
<p>（5）<code>-m parent-number</code>，<code>--mainline parent-number</code></p>
<p>如果原始提交是一个合并节点，来自于两个分支的合并，那么 Cherry pick 默认将失败，因为它不知道应该采用哪个分支的代码变动。</p>
<h4 id="12、git-stash"><a href="#12、git-stash" class="headerlink" title="12、git stash"></a>12、git stash</h4><blockquote>
<p>  存储</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> stash save <span class="token string">"描述语言"</span></code></pre>
<blockquote>
<p>  弹出存储</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> stash pop</code></pre>
<blockquote>
<p>  应用存储</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> stash apply stash@<span class="token punctuation">{</span> 1<span class="token punctuation">}</span> </code></pre>
<blockquote>
<p>  查看存储列表</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> stash list</code></pre>
<h4 id="13、git-reflog"><a href="#13、git-reflog" class="headerlink" title="13、git reflog"></a>13、git reflog</h4><blockquote>
<p>  查看git修改日志</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> reflog</code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211108104635749.png" alt="image-20211108104635749" loading="lazy"></p>
<blockquote>
<p>  回退到指定修改节点</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> reset --hard <span class="token string">'HEAD@{ 2} '</span></code></pre>
<h4 id="14、origin"><a href="#14、origin" class="headerlink" title="14、origin"></a>14、origin</h4><blockquote>
<p>  远程主机名</p>
</blockquote>
<p>origin 并不是指得是远程的仓库，而是指得是远程仓库在本地的一个指针（这个指针有可能过时的）。当我们使用使用merge 的时候，我们进行合并的时候只是上一次fetch 从远程拿到的版本。不是远程仓库的最新版本。</p>
<p>比如命令：</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> merge origin master        <span class="token comment" spellcheck="true"># 将origin merge 到 master 上</span>
<span class="token function">git</span> merge origin/master        <span class="token comment" spellcheck="true"># 将origin上的master分支 merge 到当前 branch 上 </span></code></pre>
<p>指的就是将本地的远端分支与本地的master 分支进行合并。</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/847101-20180413160038726-1532655002.png" alt="img" loading="lazy"></p>
<p>1、git fetch只会将本地库所关联的远程库（origin）的commit id更新至最新</p>
<p>2、git pull会将本地库更新至远程库的最新状态</p>
<p>所以 git fetch 和 git merge 共同效果并不完全等同于 git pull</p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 将从origin remote， master分支中提取更改，并将它们合并到本地签出分支。</span>
<span class="token function">git</span> pull origin master

<span class="token comment" spellcheck="true"># 将从本地存储的分支origin/master抽取更改，并将其合并到本地签出分支。 origin/master分支本质上是最初从origin提取的“缓存副本”。 </span>
<span class="token function">git</span> pull origin/master</code></pre>
<h4 id="15、强制拉取"><a href="#15、强制拉取" class="headerlink" title="15、强制拉取"></a>15、强制拉取</h4><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> fetch --all
<span class="token function">git</span> reset --hard origin/master
<span class="token function">git</span> pull </code></pre>
<h3 id="5、数据库操作"><a href="#5、数据库操作" class="headerlink" title="5、数据库操作"></a>5、数据库操作</h3><h4 id="1、连接查询join"><a href="#1、连接查询join" class="headerlink" title="1、连接查询join"></a>1、连接查询join</h4><blockquote>
<p>  类别</p>
</blockquote>
<ul>
<li><p>内连接：(inner) join （交集）</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> table1 <span class="token keyword">join</span> table2 <span class="token keyword">on</span> table1<span class="token punctuation">.</span>id<span class="token operator">=</span>table2<span class="token punctuation">.</span>id</code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210917223049380.png" alt="image-20210917223049380" loading="lazy"></p>
</li>
<li><p>左（外）连接：left (outer) join （查询左边的所有行，右边查询不到默认为null）</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> table1 <span class="token keyword">left</span> <span class="token keyword">join</span> table2 <span class="token keyword">on</span> table1<span class="token punctuation">.</span>id<span class="token operator">=</span>table2<span class="token punctuation">.</span>id</code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210917222942683.png" alt="image-20210917222942683" loading="lazy"></p>
</li>
<li><p>右（外）连接：right (outer) join （查询右边的所有行，左边查询不到默认为null）</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> table1 <span class="token keyword">right</span> <span class="token keyword">join</span> table2 <span class="token keyword">on</span> table1<span class="token punctuation">.</span>id<span class="token operator">=</span>table2<span class="token punctuation">.</span>id</code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20210917223036427.png" alt="image-20210917223036427" loading="lazy"></p>
</li>
<li><p>全连接：full join （为空的就显示null，相当于求并集）</p>
</li>
<li><p>交叉连接：from [多个表格] （笛卡尔积，获取交集）</p>
</li>
</ul>
<h4 id="2、分组group-by"><a href="#2、分组group-by" class="headerlink" title="2、分组group by"></a>2、分组group by</h4><p>将查询结果按照某一字段进行分组，所以被选中的字段不会重复。用于结合聚合函数，根据一个或多个列对结果集进行分组。</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> name<span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> <span class="token keyword">from</span> student <span class="token keyword">group</span> <span class="token keyword">by</span> name</code></pre>
<h4 id="3、组合查询union"><a href="#3、组合查询union" class="headerlink" title="3、组合查询union"></a>3、组合查询union</h4><blockquote>
<p>  union 语法</p>
</blockquote>
<p>用于连接多个select语句，并且每个语句必须包含相同的列、表达式或聚集函数。</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> column_name<span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">FROM</span> table_name1
<span class="token keyword">UNION</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> column_name<span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">FROM</span> table_name2</code></pre>
<blockquote>
<p>  union all 语法</p>
</blockquote>
<p>因为union默认会去除查询结果中重复的数据集，而使用union all 可以查询出两个表格的所有数据</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> column_name<span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">FROM</span> table_name1
<span class="token keyword">UNION</span> <span class="token keyword">ALL</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> column_name<span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">FROM</span> table_name2</code></pre>
<h4 id="4、联表删除"><a href="#4、联表删除" class="headerlink" title="4、联表删除"></a>4、联表删除</h4><pre class=" language-sql"><code class="language-sql"><span class="token keyword">delete</span>
    report<span class="token punctuation">,</span> item
<span class="token keyword">FROM</span>
    <span class="token punctuation">`</span>t_purchase_market_report<span class="token punctuation">`</span> report
    <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> t_purchase_market_report_item item <span class="token keyword">ON</span> report<span class="token punctuation">.</span>reportId <span class="token operator">=</span> item<span class="token punctuation">.</span>reportId 
<span class="token keyword">WHERE</span>
    report<span class="token punctuation">.</span>createTime <span class="token operator">BETWEEN</span> <span class="token string">'2021-10-14 19:52:09'</span> 
    <span class="token operator">AND</span> <span class="token string">'2021-10-14 19:54:09'</span> </code></pre>
<h4 id="5、查询插入"><a href="#5、查询插入" class="headerlink" title="5、查询插入"></a>5、查询插入</h4><pre class=" language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t_biz_role_auth <span class="token punctuation">(</span> 
    <span class="token punctuation">`</span>roleId<span class="token punctuation">`</span><span class="token punctuation">,</span> 
    <span class="token punctuation">`</span>authId<span class="token punctuation">`</span><span class="token punctuation">,</span> 
    <span class="token punctuation">`</span>authType<span class="token punctuation">`</span><span class="token punctuation">,</span>
    <span class="token punctuation">`</span>accessType<span class="token punctuation">`</span><span class="token punctuation">,</span>
    <span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span>
    <span class="token punctuation">`</span>createTime<span class="token punctuation">`</span><span class="token punctuation">,</span>
    <span class="token punctuation">`</span>updateTime<span class="token punctuation">`</span> <span class="token punctuation">)</span> 
<span class="token keyword">SELECT</span>
    <span class="token punctuation">`</span>roleId<span class="token punctuation">`</span><span class="token punctuation">,</span>
    <span class="token number">1123</span><span class="token punctuation">,</span>
    <span class="token punctuation">`</span>authType<span class="token punctuation">`</span><span class="token punctuation">,</span>
    <span class="token punctuation">`</span>accessType<span class="token punctuation">`</span><span class="token punctuation">,</span>
    <span class="token string">'请购单创建'</span><span class="token punctuation">,</span>
    <span class="token punctuation">`</span>createTime<span class="token punctuation">`</span><span class="token punctuation">,</span>
    <span class="token punctuation">`</span>updateTime<span class="token punctuation">`</span> 
<span class="token keyword">FROM</span>
    t_biz_role_auth 
<span class="token keyword">WHERE</span>
    authId <span class="token operator">=</span> <span class="token number">1122</span><span class="token punctuation">;</span></code></pre>
<h4 id="6、行锁for-update"><a href="#6、行锁for-update" class="headerlink" title="6、行锁for update"></a>6、行锁for update</h4><blockquote>
<p>  for update</p>
</blockquote>
<p>for update是一种行级锁，又叫排它锁，一旦用户对某个行施加了行级加锁，则该用户可以查询也可以更新被加锁的数据行，<strong>其他用户只能查询但不能更新</strong>被加锁的数据行。行锁永远是独占方式锁。</p>
<p>只有当出现如下之一的条件，才会释放共享更新锁：<br>1、执行提交（COMMIT）语句<br>2、退出数据库（LOG　OFF）<br>3、程序停止运行</p>
<blockquote>
<p>  使用方法</p>
</blockquote>
<p><strong>例1:</strong> (明确指定主键，并且数据真实存在，row lock)</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">user</span> <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token number">3</span> <span class="token keyword">FOR</span> <span class="token keyword">UPDATE</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">user</span> <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token number">3</span> <span class="token operator">and</span> name<span class="token operator">=</span><span class="token string">'Tom'</span> <span class="token keyword">FOR</span> <span class="token keyword">UPDATE</span><span class="token punctuation">;</span></code></pre>
<p><strong>例2:</strong> (明确指定主键，但数据不存在，无lock)</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">user</span> <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token number">0</span> <span class="token keyword">FOR</span> <span class="token keyword">UPDATE</span><span class="token punctuation">;</span></code></pre>
<p><strong>例3:</strong> (主键不明确，table lock)</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">user</span> <span class="token keyword">WHERE</span> id<span class="token operator">&lt;></span><span class="token number">3</span> <span class="token keyword">FOR</span> <span class="token keyword">UPDATE</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">user</span> <span class="token keyword">WHERE</span> id <span class="token operator">LIKE</span> <span class="token string">'%3%'</span> <span class="token keyword">FOR</span> <span class="token keyword">UPDATE</span><span class="token punctuation">;</span></code></pre>
<p><strong>例4:</strong> (无主键，table lock)</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">user</span> <span class="token keyword">WHERE</span> name<span class="token operator">=</span><span class="token string">'Tom'</span> <span class="token keyword">FOR</span> <span class="token keyword">UPDATE</span><span class="token punctuation">;</span></code></pre>
<h4 id="7、事务"><a href="#7、事务" class="headerlink" title="7、事务"></a>7、事务</h4><blockquote>
<p>  四大特性</p>
</blockquote>
<ul>
<li><strong>原子性：</strong>一个事务（transaction）中的所有操作，要么全部完成，要么全部不完成，不会结束在中间某个环节。事务在执行过程中发生错误，会被回滚（Rollback）到事务开始前的状态，就像这个事务从来没有执行过一样。</li>
<li><strong>一致性：</strong>在事务开始之前和事务结束以后，数据库的完整性没有被破坏。这表示写入的资料必须完全符合所有的预设规则，这包含资料的精确度、串联性以及后续数据库可以自发性地完成预定的工作。</li>
<li><strong>隔离性：</strong>数据库允许多个并发事务同时对其数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致。事务隔离分为不同级别，包括读未提交（Read uncommitted）、读提交（read committed）、可重复读（repeatable read）和串行化（Serializable）。</li>
<li><strong>持久性：</strong>事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失。</li>
</ul>
<blockquote>
<p>  事务处理方法</p>
</blockquote>
<p><strong>1、开启和提交事务</strong></p>
<ul>
<li><code>BEGIN</code> 或 <code>START TRANSACTION</code> 开始一个事务</li>
<li><code>ROLLBACK </code>或 <code>ROLLBACK WORK</code> 事务回滚</li>
<li><code>COMMIT </code>或 <code>COMMIT WORK </code>事务确认</li>
</ul>
<p><strong>2、直接用 SET 来改变 MySQL 的自动提交模式</strong></p>
<ul>
<li><code>SET AUTOCOMMIT=0 </code>禁止自动提交</li>
<li><code>SET AUTOCOMMIT=1</code>开启自动提交</li>
</ul>
<h4 id="8、索引INDEX"><a href="#8、索引INDEX" class="headerlink" title="8、索引INDEX"></a>8、索引INDEX</h4><blockquote>
<p>  概念</p>
</blockquote>
<p>MySQL索引的建立对于MySQL的高效运行是很重要的，索引可以大大提高MySQL的检索速度。</p>
<p>索引分单列索引和组合索引。单列索引，即一个索引只包含单个列，一个表可以有多个单列索引，但这不是组合索引。组合索引，即一个索引包含多个列。</p>
<p>上面都在说使用索引的好处，但过多的使用索引将会造成滥用。因此索引也会有它的缺点：虽然索引大大提高了查询速度，同时却会降低更新表的速度，如对表进行INSERT、UPDATE和DELETE。因为更新表时，MySQL不仅要保存数据，还要保存一下索引文件。</p>
<p>建立索引会占用磁盘空间的索引文件。</p>
<blockquote>
<p>  普通索引</p>
</blockquote>
<p><strong>创建索引的方法</strong></p>
<pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># 方法一</span>
<span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> indexName <span class="token keyword">ON</span> table_name <span class="token punctuation">(</span>column_name<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># 方法二</span>
<span class="token keyword">ALTER</span> <span class="token keyword">table</span> tableName <span class="token keyword">ADD</span> <span class="token keyword">INDEX</span> indexName<span class="token punctuation">(</span>columnName<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># 方法三</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> mytable<span class="token punctuation">(</span>  
    ID <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>   
    username <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
    <span class="token keyword">INDEX</span> <span class="token punctuation">[</span>indexName<span class="token punctuation">]</span> <span class="token punctuation">(</span>username<span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span>  </code></pre>
<p><strong>删除索引</strong></p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> <span class="token punctuation">[</span>indexName<span class="token punctuation">]</span> <span class="token keyword">ON</span> mytable<span class="token punctuation">;</span> </code></pre>
<blockquote>
<p>  唯一索引</p>
</blockquote>
<p>索引列的值必须唯一，但允许有空值。如果是组合索引，则列值的组合必须唯一。它有以下几种创建方式：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># 方法一</span>
<span class="token keyword">CREATE</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">INDEX</span> indexName <span class="token keyword">ON</span> mytable<span class="token punctuation">(</span>username<span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span> 

<span class="token comment" spellcheck="true"># 方法二</span>
<span class="token keyword">ALTER</span> <span class="token keyword">table</span> mytable <span class="token keyword">ADD</span> <span class="token keyword">UNIQUE</span> <span class="token punctuation">[</span>indexName<span class="token punctuation">]</span> <span class="token punctuation">(</span>username<span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># 方法三</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> mytable<span class="token punctuation">(</span>  
    ID <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>   
    username <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
    <span class="token keyword">UNIQUE</span> <span class="token punctuation">[</span>indexName<span class="token punctuation">]</span> <span class="token punctuation">(</span>username<span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><strong>删除索引</strong></p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> testalter_tbl <span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> <span class="token number">c</span><span class="token punctuation">;</span></code></pre>
<blockquote>
<p>  四种添加数据表索引的方式</p>
</blockquote>
<ul>
<li>**ALTER TABLE tbl_name ADD PRIMARY KEY (column_list):**该语句添加一个主键，这意味着索引值必须是唯一的，且不能为NULL。</li>
<li><strong>ALTER TABLE tbl_name ADD UNIQUE index_name (column_list):</strong> 这条语句创建索引的值必须是唯一的（除了NULL外，NULL可能会出现多次）。</li>
<li><strong>ALTER TABLE tbl_name ADD INDEX index_name (column_list):</strong> 添加普通索引，索引值可出现多次。</li>
<li>**ALTER TABLE tbl_name ADD FULLTEXT index_name (column_list):**该语句指定了索引为 FULLTEXT ，用于全文索引。</li>
</ul>
<blockquote>
<p>  显示索引信息</p>
</blockquote>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SHOW</span> <span class="token keyword">INDEX</span> <span class="token keyword">FROM</span> table_name</code></pre>
<blockquote>
<p>  强制使用主键索引</p>
</blockquote>
<p>force index(PRI)</p>
<h4 id="9、on-duplicate-key-update"><a href="#9、on-duplicate-key-update" class="headerlink" title="9、on duplicate key update"></a>9、on duplicate key update</h4><p>如果主键不存在就插入，存在则执行 update 后面的更新语句</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t_biz_user_role<span class="token punctuation">(</span>uin<span class="token punctuation">,</span> roleId<span class="token punctuation">,</span> roleName<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token comment" spellcheck="true">#{ uin} , #{ roleId} , #{ roleName} ) on duplicate key update roleName=#{ roleName} </span></code></pre>
<h3 id="6、Maven基本指令"><a href="#6、Maven基本指令" class="headerlink" title="6、Maven基本指令"></a>6、Maven基本指令</h3><blockquote>
<p>  需要先执行下方代码</p>
<p>  mvn -N io.takari:maven:0.7.7:wrapper</p>
</blockquote>
<p>mvn clean install        安装mvn，生成<code>.mvn</code>文件</p>
<p>mvn -version         查看maven的版本及配置信息</p>
<p>mvn compile         编译项目代码</p>
<p>mvn package        打包项目</p>
<p>mvn package -Dmaven.test.skip=true  打包项目时跳过单元测试</p>
<p>mvn test            运行单元测试</p>
<p>mvn clean           清除编译产生的target文件夹内容，可以配合相应命令一起使用，如mvn clean package， mvn clean test</p>
<p>mvn deploy          打包后将其安装到pom文件中配置的远程仓库</p>
<p>mvn eclipse:eclipse    将maven生成eclipse项目结构</p>
<p>mvn eclipse:clean     清除maven项目中eclipse的项目结构</p>
<p>mvn site            生成站点目录</p>
<p>mvn dependency:list    显示所有已经解析的所有依赖</p>
<p>mvn dependency:tree   以树的结构展示项目中的依赖</p>
<p>mvn dependency:analyze  对项目中的依赖进行分析，依赖未使用，使用单未引入</p>
<p>mvn tomcat:run        启动tomcat</p>
<h3 id="7、pm2常用指令"><a href="#7、pm2常用指令" class="headerlink" title="7、pm2常用指令"></a>7、pm2常用指令</h3><blockquote>
<p>  pm2官方文档：<a target="_blank" rel="noopener" href="https://pm2.keymetrics.io/docs/usage/quick-start/">https://pm2.keymetrics.io/docs/usage/quick-start/</a></p>
<p>  pm2是一个进程管理工具,可以用它来管理你的node进程，并查看node进程的状态，当然也支持性能监控，进程守护，负载均衡等功能</p>
<p>  安装失败：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/hallejuayahaha/p/13267892.html">https://www.cnblogs.com/hallejuayahaha/p/13267892.html</a></p>
</blockquote>
<p>pm2需要全局安装        <code>npm install -g pm2</code></p>
<p>为pm2创建软连接        <code>ln -s /usr/local/node/bin/pm2 /usr/local/bin/</code></p>
<p>启动进程/应用           <code>pm2 start bin/www 或 pm2 start app.js</code></p>
<p>重命名进程/应用           <code>pm2 start app.js --name wb123</code></p>
<p>添加进程/应用 watch         <code>pm2 start bin/www --watch</code></p>
<p>结束进程/应用            <code>pm2 stop www</code></p>
<p>结束所有进程/应用           <code>pm2 stop all</code></p>
<p>删除进程/应用            <code>pm2 delete www</code></p>
<p>删除所有进程/应用             <code>pm2 delete all</code></p>
<p>列出所有进程/应用          <code>pm2 list</code></p>
<p>查看某个进程/应用具体情况      <code>pm2 describe www</code></p>
<p>查看进程/应用的资源消耗情况       <code>pm2 monit</code></p>
<p>查看pm2的日志                 <code>pm2 logs</code></p>
<p>若要查看某个进程/应用的日志,使用  <code>pm2 logs www</code></p>
<p>重新启动进程/应用            <code>pm2 restart www</code></p>
<p>重新启动所有进程/应用        <code>pm2 restart all</code></p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211110162503414.png" alt="image-20211110162503414" loading="lazy"></p>
<h3 id="8、Linux相关"><a href="#8、Linux相关" class="headerlink" title="8、Linux相关"></a>8、Linux相关</h3><h4 id="1、创建文件夹"><a href="#1、创建文件夹" class="headerlink" title="1、创建文件夹"></a>1、创建文件夹</h4><p>mkdir</p>
<h4 id="2、删除文件"><a href="#2、删除文件" class="headerlink" title="2、删除文件"></a>2、删除文件</h4><p>rm -rf &lt;文件名&gt;</p>
<h4 id="3、创建SSH登录证书"><a href="#3、创建SSH登录证书" class="headerlink" title="3、创建SSH登录证书"></a>3、创建SSH登录证书</h4><blockquote>
<p>  生成证书</p>
</blockquote>
<p>输入指令</p>
<pre class=" language-bash"><code class="language-bash">ssh-keygen -t rsa -f ~/.ssh/TL-BETA-02</code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211110153343367.png" alt="image-20211110153343367" loading="lazy"></p>
<p>注册公钥</p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 在服务器上注册公钥</span>
<span class="token function">cat</span> TL-BETA-02.pub <span class="token operator">>></span> authorized_keys

<span class="token comment" spellcheck="true"># ssh 对目录的权限有要求，要设置下新生成的config文件权限才行</span>
<span class="token function">chmod</span> 600 authorized_keys</code></pre>
<blockquote>
<p>  下载密钥</p>
</blockquote>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211110153815689.png" alt="image-20211110153815689" loading="lazy"></p>
<blockquote>
<p>  使用密钥连接服务器</p>
</blockquote>
<p>输入用户名，选择登录方式，点击设置</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211110153923334.png" alt="image-20211110153923334" loading="lazy"></p>
<p>导入对应的密钥然后点击确定即可</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211110153956739.png" alt="image-20211110153956739" loading="lazy"></p>
<h4 id="4、less相关"><a href="#4、less相关" class="headerlink" title="4、less相关"></a>4、less相关</h4><blockquote>
<p>  外部命令</p>
</blockquote>
<ul>
<li>-b &lt;缓冲区大小&gt; 设置缓冲区的大小</li>
<li>-e 当文件显示结束后，自动离开</li>
<li>-f 强迫打开特殊文件，例如外围设备代号、目录和二进制文件</li>
<li>-g 只标志最后搜索的关键词</li>
<li>-i 忽略搜索时的大小写</li>
<li>-m 显示类似more命令的百分比</li>
<li>-N 显示每行的行号</li>
<li>-o &lt;文件名&gt; 将less 输出的内容在指定文件中保存起来</li>
<li>-Q 不使用警告音</li>
<li>-s 显示连续空行为一行</li>
<li>-S 行过长时间将超出部分舍弃</li>
<li>-x &lt;数字&gt; 将”tab”键显示为规定的数字空格</li>
</ul>
<blockquote>
<p>  搜索命令</p>
</blockquote>
<ul>
<li>/字符串：向下搜索”字符串”的功能</li>
<li>?字符串：向上搜索”字符串”的功能</li>
<li>n：重复前一个搜索（与 / 或 ? 有关）</li>
<li>N：反向重复前一个搜索（与 / 或 ? 有关）</li>
</ul>
<blockquote>
<p>  翻页命令</p>
</blockquote>
<ul>
<li>b 向上翻一页</li>
<li>f 向下翻一页</li>
<li>j 下一行</li>
<li>k 上一行</li>
<li>d 向后翻半页</li>
<li>u 向前滚动半页</li>
<li>y 向前滚动一行</li>
<li>空格键 滚动一页</li>
<li>回车键 滚动一行</li>
<li>[pagedown]： 向下翻动一页</li>
<li>[pageup]： 向上翻动一页</li>
</ul>
<blockquote>
<p>  其他导航</p>
</blockquote>
<ul>
<li>G - 移动到最后一行</li>
<li>g - 移动到第一行</li>
<li>q / ZZ - 退出 less 命令</li>
</ul>
<blockquote>
<p>  标记导航</p>
</blockquote>
<ul>
<li>m + a： 使用 a 标记文本的当前位置，使用单个字母标记</li>
<li>‘a：导航到标记 a 处</li>
</ul>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211216151854684.png" alt="image-20211216151854684" loading="lazy"></p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211216151921796.png" alt="image-20211216151921796" loading="lazy"></p>
<blockquote>
<p>  其他命令</p>
</blockquote>
<ul>
<li><p>v - 使用配置的编辑器编辑当前文件</p>
</li>
<li><p>h - 显示 less 的帮助文档</p>
</li>
<li><p>&amp;pattern - 仅显示匹配模式的行，而不是整个文件，进去就出不来啊啊啊啊</p>
</li>
<li><p>大写 <strong>F</strong>，就会有类似 <strong>tail -f</strong> 的效果，读取写入文件的最新内容， 按 <strong>ctrl+C</strong> 停止。</p>
</li>
<li><p><strong>v</strong> 进入编辑模型， <strong>shift+ZZ</strong> 保存退出到 <strong>less</strong> 查看模式。</p>
</li>
<li><p><strong>:e</strong> 查看下一个文件， 用 <strong>:n</strong> 和 <strong>:p</strong> 来回切换。</p>
</li>
</ul>
<h4 id="5、查看服务器是多少位的"><a href="#5、查看服务器是多少位的" class="headerlink" title="5、查看服务器是多少位的"></a>5、查看服务器是多少位的</h4><pre class=" language-bash"><code class="language-bash">getconf LONG_BIT</code></pre>
<h4 id="6、服务器配置蒲公英"><a href="#6、服务器配置蒲公英" class="headerlink" title="6、服务器配置蒲公英"></a>6、服务器配置蒲公英</h4><p>1、安装蒲公英：<a target="_blank" rel="noopener" href="https://service.oray.com/question/5063.html">https://service.oray.com/question/5063.html</a></p>
<p>2、登录蒲公英后台，并创建网络，添加软件成员</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211221161009666.png" alt="image-20211221161009666" loading="lazy"></p>
<p>3、使用成员账号进行登录</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211221161043663.png" alt="image-20211221161043663" loading="lazy"></p>
<p>4、在服务器上输入 <code>pgyvpn</code>即可登录</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20211221161100951.png" alt="image-20211221161100951" loading="lazy"></p>
<h4 id="7、修改Linux样式"><a href="#7、修改Linux样式" class="headerlink" title="7、修改Linux样式"></a>7、修改Linux样式</h4><p>1、修改 <code>~/.bashrc</code> 文件，增加</p>
<pre class=" language-bash"><code class="language-bash">PS1<span class="token operator">=</span><span class="token string">"(\u) \[\e[36;40m\][\w]\[\e[0m\]\\[\e[36;40m\]\\$\[\e[0m\] "</span> </code></pre>
<p>2、重新加载配置</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">source</span> ~/.bashrc</code></pre>
<h4 id="8、安装Nginx"><a href="#8、安装Nginx" class="headerlink" title="8、安装Nginx"></a>8、安装Nginx</h4><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> rpm -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm

<span class="token function">sudo</span> yum <span class="token function">install</span> -y nginx</code></pre>
<h4 id="9、安装Redis"><a href="#9、安装Redis" class="headerlink" title="9、安装Redis"></a>9、安装Redis</h4><pre class=" language-bash"><code class="language-bash">yum <span class="token function">install</span> redis</code></pre>
<h4 id="10、echo命令"><a href="#10、echo命令" class="headerlink" title="10、echo命令"></a>10、echo命令</h4><p>1、echo命令我们经常使用的选项有两个，一个是<code>-n</code>，表示输出之后不换行。另外一个是<code>-e</code>，表示对于转义字符按对应的方式处理，假设不加<code>-e</code>那么对于转义字符会按普通字符处理。</p>
<p>2、echo输出时的转义字符<br><code>\b</code> 表示删除前面的空格<br><code>\n</code> 表示换行<br><code>\t</code> 表示水平制表符<br><code>\v</code> 表示垂直制表符<br><code>\c</code> \c后面的字符将不会输出，同一时候，输出完毕后也不会换行<br><code>\r</code> 输出回车符（可是你会发现\r前面的字符没有了）<br><code>\a</code> 表示输出一个警告声音</p>
<p>3、echo中的重定向，能够把内容输出到文件里而不是标准输出</p>
<pre class=" language-bash"><code class="language-bash"><span class="token keyword">echo</span> <span class="token string">"hello world!"</span> <span class="token operator">></span> test1.tmp</code></pre>
<h4 id="11、LogStash的安装"><a href="#11、LogStash的安装" class="headerlink" title="11、LogStash的安装"></a>11、LogStash的安装</h4><p>1、下载rpm安装包</p>
<p>2、上传到服务器上并解压安装</p>
<pre class=" language-bash"><code class="language-bash">rpm -ivh logstash-7.16.3-x86_64.rpm </code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20220120095305181.png" alt="image-20220120095305181" loading="lazy"></p>
<p>3、查看文件所在路径</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">whereis</span> logstash</code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20220120095610819.png" alt="image-20220120095610819" loading="lazy"></p>
<p>4、添加可执行文件路径</p>
<pre class=" language-bash"><code class="language-bash">vim /etc/profile.d/logstash.sh      
<span class="token comment" spellcheck="true"># 输入内容</span>
<span class="token function">export</span> PATH<span class="token operator">=</span><span class="token variable">$PATH</span>:/usr/share/logstash/bin

<span class="token comment" spellcheck="true"># 重新加载配置文件</span>
<span class="token function">source</span> /etc/profile.d/logstash.sh</code></pre>
<p>5、进入配置文件目录，编辑内容</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> /etc/logstash/conf.d
vim logstash.conf

<span class="token comment" spellcheck="true"># 输入内容</span>
input <span class="token punctuation">{</span> 
  stdin <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true"># 标准输入</span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 

output <span class="token punctuation">{</span> 
  stdout <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true"># 标准输入</span>
    codec <span class="token operator">=</span><span class="token operator">></span> rubydebug   <span class="token comment" spellcheck="true"># 编码格式ruby</span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> </code></pre>
<p>6、启动Logstash测试</p>
<pre class=" language-bash"><code class="language-bash">logstash -f /etc/logstash/conf.d/logstash.conf</code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20220120100412980.png" alt="image-20220120100412980" loading="lazy"></p>
<p>启动之后就可以输入内容</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20220120100525968.png" alt="image-20220120100525968" loading="lazy"></p>
<h4 id="12、LogStash监听日志"><a href="#12、LogStash监听日志" class="headerlink" title="12、LogStash监听日志"></a>12、LogStash监听日志</h4><p>1、创建日志文件测试</p>
<pre class=" language-bash"><code class="language-bash">vim test.log

11111
22222
33333</code></pre>
<p>2、修改配置文件</p>
<pre class=" language-bash"><code class="language-bash">input <span class="token punctuation">{</span> 
     <span class="token function">file</span> <span class="token punctuation">{</span> 
          path <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"/etc/logstash/conf.d/test.log"</span>    <span class="token comment" spellcheck="true">#可以touch一个文件，随意弄点数据</span>
          <span class="token function">type</span> <span class="token operator">=</span><span class="token operator">></span> syslog
          exclude <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"*.gz"</span>  <span class="token comment" spellcheck="true">#不想监听的文件规则，基于glob匹配语法</span>
          start_position <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"beginning"</span> <span class="token comment" spellcheck="true">#第一次从头开始读取文件  beginning or end</span>
          stat_interval <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"3"</span>  <span class="token comment" spellcheck="true">#定时检查文件是否更新，默认1s</span>
   <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 

output <span class="token punctuation">{</span> 
    stdout <span class="token punctuation">{</span> 
        codec <span class="token operator">=</span><span class="token operator">></span> rubydebug
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> </code></pre>
<p>3、启动LogStash</p>
<pre class=" language-bash"><code class="language-bash">logstash -f logstash.conf</code></pre>
<p>启动完成之后就会读取并输出日志</p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20220120111529955.png" alt="image-20220120111529955" loading="lazy"></p>
<p>4、修改日志文件的内容，LogStash也可以监听到最新的变化</p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># "444"将覆盖原有的内容</span>
<span class="token keyword">echo</span> <span class="token string">"444"</span> <span class="token operator">></span> test.log 

<span class="token comment" spellcheck="true"># 或者直接编辑文件</span>
vim test.log</code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/image-20220120111651388.png" alt="image-20220120111651388" loading="lazy"></p>
<h4 id="13、-LogStash-Filter插件"><a href="#13、-LogStash-Filter插件" class="headerlink" title="13、 LogStash Filter插件"></a>13、 LogStash Filter插件</h4><p>数据从源传输到存储的过程中，Logstash的filter过滤器能够解析各个事件，识别已命名的字段结构，并将它们转换成通用的格式，以便轻松，更快速的分析和实现商业价值。</p>
<ul>
<li><p>利用Grok从非结构化数据中派生出结构</p>
</li>
<li><p>利用geoip从ip地址分析出地理坐标</p>
</li>
<li><p>利用useragent从请求中分析操作系统，设备类型</p>
</li>
</ul>
<blockquote>
<p>  Grok 插件</p>
</blockquote>
<p>grok其实是带有名字的正则表达式集合，grok内置了很多pattern可以直接使用，<a target="_blank" rel="noopener" href="http://grokdebug.herokuapp.com/">grok语法生成器</a></p>
<pre class=" language-bash"><code class="language-bash">%<span class="token punctuation">{</span> IPORHOST:clientip<span class="token punctuation">}</span>  
%<span class="token punctuation">{</span> NGUSER:ident<span class="token punctuation">}</span>  
%<span class="token punctuation">{</span> NGUSER:auth<span class="token punctuation">}</span>  
\<span class="token punctuation">[</span>%<span class="token punctuation">{</span> HTTPDATE:timestamp<span class="token punctuation">}</span> \<span class="token punctuation">]</span> 
<span class="token string">"%{ WORD:verb}  %{ URIPATHPARAM:request}  HTTP/%{ NUMBER:httpversion} "</span> 
%<span class="token punctuation">{</span> NUMBER:response<span class="token punctuation">}</span> <span class="token punctuation">(</span>?:%<span class="token punctuation">{</span> NUMBER:bytes<span class="token punctuation">}</span> <span class="token operator">|</span>-<span class="token punctuation">)</span> <span class="token punctuation">(</span>?:<span class="token string">"(?:%{ URI:referrer} |-)"</span><span class="token operator">|</span>%<span class="token punctuation">{</span> QS:referrer<span class="token punctuation">}</span> <span class="token punctuation">)</span>
%<span class="token punctuation">{</span> QS:agent<span class="token punctuation">}</span>  %<span class="token punctuation">{</span> QS:xforwardedfor<span class="token punctuation">}</span>  %<span class="token punctuation">{</span> IPORHOST:host<span class="token punctuation">}</span>  %<span class="token punctuation">{</span> BASE10NUM:request_duration<span class="token punctuation">}</span> </code></pre>
<p>在配置文件中添加</p>
<pre class=" language-bash"><code class="language-bash">input <span class="token punctuation">{</span> 
     <span class="token function">file</span> <span class="token punctuation">{</span> 
          path <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"/etc/logstash/conf.d/test.log"</span>    <span class="token comment" spellcheck="true">#可以touch一个文件，随意弄点数据</span>
          <span class="token function">type</span> <span class="token operator">=</span><span class="token operator">></span> syslog
          exclude <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"*.gz"</span>  <span class="token comment" spellcheck="true">#不想监听的文件规则，基于glob匹配语法</span>
          start_position <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"beginning"</span> <span class="token comment" spellcheck="true">#第一次从头开始读取文件  beginning or end</span>
          stat_interval <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"3"</span>  <span class="token comment" spellcheck="true">#定时检查文件是否更新，默认1s</span>
   <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 

filter <span class="token punctuation">{</span> 
       grok <span class="token punctuation">{</span> 
           match <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> 
               <span class="token string">"message"</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"%{ COMBINEDAPACHELOG} "</span>
              <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 

output <span class="token punctuation">{</span> 
      stdout <span class="token punctuation">{</span> 
          codec <span class="token operator">=</span><span class="token operator">></span> rubydebug
   <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> </code></pre>
<h4 id="14、LogStash配置"><a href="#14、LogStash配置" class="headerlink" title="14、LogStash配置"></a>14、LogStash配置</h4><blockquote>
<p>  读取文件File</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash">input <span class="token punctuation">{</span> 
    <span class="token function">file</span> <span class="token punctuation">{</span> 
        path <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">"/var/log/*.log"</span>, <span class="token string">"/var/log/message"</span><span class="token punctuation">]</span>
        <span class="token function">type</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"system"</span>
        start_position <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"beginning"</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> </code></pre>
<ul>
<li>discover_interval：每隔多久去检查一次被监听的 <code>path</code> 下是否有新文件。默认值是 15 秒</li>
<li>exclude：不想被监听的文件可以排除出去，这里跟 <code>path</code> 一样支持 glob 展开</li>
<li>sincedb_path：如果你不想用默认的 <code>$HOME/.sincedb</code>(Windows 平台上在 <code>C:\Windows\System32\config\systemprofile\.sincedb</code>)，可以通过这个配置定义 sincedb 文件到其他位置</li>
<li>sincedb_write_interval：每隔多久写一次 sincedb 文件，默认是 15 秒</li>
<li>stat_interval：每隔多久检查一次被监听文件状态（是否有更新），默认是 1 秒</li>
<li>start_position：从什么位置开始读取文件数据，默认是结束位置。如果是要导入原有数据，把这个设定改成 “beginning”</li>
</ul>
<blockquote>
<p>增加输出字段</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash">input <span class="token punctuation">{</span>                                       <span class="token comment" spellcheck="true">#日志数据输入来源log4j</span>
    log4j <span class="token punctuation">{</span> 
        host <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"10.104.112.175"</span>
        port <span class="token operator">=</span><span class="token operator">></span> 4561
        <span class="token function">type</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"simple"</span>
    <span class="token punctuation">}</span> 
    log4j <span class="token punctuation">{</span> 
        host <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"10.104.112.175"</span>
        port <span class="token operator">=</span><span class="token operator">></span> 4560
        <span class="token function">type</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"detail"</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 

filter <span class="token punctuation">{</span>                                       <span class="token comment" spellcheck="true">#logstash过滤器</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"simple"</span> <span class="token punctuation">{</span> 
        mutate<span class="token punctuation">{</span> 
            <span class="token function">split</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">"message"</span>,<span class="token string">"|"</span><span class="token punctuation">]</span>     <span class="token comment" spellcheck="true">#按 | 进行split切割message</span>
            add_field <span class="token operator">=</span><span class="token operator">></span>   <span class="token punctuation">{</span> 
                <span class="token string">"requestId"</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"%{ [message][0]} "</span>
            <span class="token punctuation">}</span> 
            add_field <span class="token operator">=</span><span class="token operator">></span>   <span class="token punctuation">{</span> 
                <span class="token string">"timeCost"</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"%{ [message][1]} "</span>
            <span class="token punctuation">}</span> 
            add_field <span class="token operator">=</span><span class="token operator">></span>   <span class="token punctuation">{</span> 
                <span class="token string">"responseStatus"</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"%{ [message][2]} "</span>
            <span class="token punctuation">}</span> 
            add_field <span class="token operator">=</span><span class="token operator">></span>   <span class="token punctuation">{</span> 
                <span class="token string">"channelCode"</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"%{ [message][3]} "</span>
            <span class="token punctuation">}</span> 
            add_field <span class="token operator">=</span><span class="token operator">></span>   <span class="token punctuation">{</span> 
                <span class="token string">"transCode"</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"%{ [message][4]} "</span>
            <span class="token punctuation">}</span> 
        <span class="token punctuation">}</span> 
        mutate <span class="token punctuation">{</span> 
            convert <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">"timeCost"</span>, <span class="token string">"integer"</span><span class="token punctuation">]</span>  <span class="token comment" spellcheck="true">#修改timeCost字段类型为整型</span>
        <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span>  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"detail"</span> <span class="token punctuation">{</span> 
        grok<span class="token punctuation">{</span> 
            match <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>              <span class="token comment" spellcheck="true">#将message里面 TJParam后面的内容，分隔并新增为ES字段和值</span>
                <span class="token string">"message"</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">".*TJParam %{ PROG:requestId}  %{ PROG:channelCode}  %{ PROG:transCode} "</span>
            <span class="token punctuation">}</span> 
        <span class="token punctuation">}</span> 
        grok<span class="token punctuation">{</span> 
            match <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  
                <span class="token string">"message"</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"(?&lt;temMsg>(.*)(?=TJParam)/?)"</span>  <span class="token comment" spellcheck="true">#截取TJParam之前的字符作为temMsg字段的值</span>
                remove_field <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">"message"</span><span class="token punctuation">]</span>             <span class="token comment" spellcheck="true">#删除字段message</span>
            <span class="token punctuation">}</span> 
        <span class="token punctuation">}</span> 
        mutate <span class="token punctuation">{</span> 
            <span class="token function">rename</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token string">"temMsg"</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"message"</span><span class="token punctuation">}</span>              <span class="token comment" spellcheck="true">#重命名字段temMsg为message</span>
        <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 

output <span class="token punctuation">{</span> 
    elasticsearch <span class="token punctuation">{</span> 
        action <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"index"</span>
        hosts <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"10.104.112.175:9200"</span>
        index <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"supergwlog--%{ +YYYY-MM} "</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> </code></pre>
<h4 id="15、解压缩"><a href="#15、解压缩" class="headerlink" title="15、解压缩"></a>15、解压缩</h4><blockquote>
<p>压缩文件</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># mydata目录压缩为mydata.zip</span>
<span class="token function">zip</span> -r mydata.zip mydata</code></pre>
<blockquote>
<p>解压文件</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 把mydata.zip解压到当前目录</span>
unzip mydata.zip</code></pre>
<h4 id="16、关闭Kibana"><a href="#16、关闭Kibana" class="headerlink" title="16、关闭Kibana"></a>16、关闭Kibana</h4><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 查看进程pid</span>
<span class="token function">netstat</span> -pln <span class="token operator">|</span> <span class="token function">grep</span> 5601</code></pre>
<h4 id="17、Nginx配置默认响应"><a href="#17、Nginx配置默认响应" class="headerlink" title="17、Nginx配置默认响应"></a>17、Nginx配置默认响应</h4><blockquote>
<p>当项目重启的时候，nginx可以对请求进行默认回复，将500响应变为200</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash">location /system_updating <span class="token punctuation">{</span> 
    internal<span class="token punctuation">;</span>
    default_type application/json<span class="token punctuation">;</span>
    <span class="token keyword">return</span> 200 <span class="token string">'{ "code":100000, "msg":"系统更新中，请稍等片刻"} '</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 

location /frontend_error <span class="token punctuation">{</span> 
    internal<span class="token punctuation">;</span>
    default_type application/json<span class="token punctuation">;</span>
    <span class="token keyword">return</span> 200 <span class="token string">'{ "code":100000, "msg":"页面异常，请截图反馈至产品助理"} '</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 

location /  <span class="token punctuation">{</span> 

    <span class="token comment" spellcheck="true">#add_header Access-Control-Allow-Origin *;</span>
    <span class="token comment" spellcheck="true">#add_header Access-Control-Allow-Headers X-Requested-With;</span>
    <span class="token comment" spellcheck="true">#add_header Access-Control-Allow-Methods GET,POST,OPTIONS;</span>

    proxy_pass    http://jweb_tl_pms/<span class="token punctuation">;</span>
    proxy_set_header Host <span class="token variable">$host</span><span class="token punctuation">;</span>
    proxy_intercept_errors on<span class="token punctuation">;</span>
    error_page 400  <span class="token operator">=</span>200 /frontend_error<span class="token punctuation">;</span>
    error_page 502  <span class="token operator">=</span>200 /system_updating<span class="token punctuation">;</span>
<span class="token punctuation">}</span> </code></pre>
<h4 id="18、find查找文件"><a href="#18、find查找文件" class="headerlink" title="18、find查找文件"></a>18、find查找文件</h4><pre class=" language-bash"><code class="language-bash"><span class="token function">find</span> / -name <span class="token string">'redis*'</span></code></pre>
<h4 id="19、crontab定时任务"><a href="#19、crontab定时任务" class="headerlink" title="19、crontab定时任务"></a>19、crontab定时任务</h4><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 查看定时任务</span>
<span class="token function">crontab</span> -l

<span class="token comment" spellcheck="true"># 编辑定时任务</span>
<span class="token function">crontab</span> -e
50 14 * * 1-5 /usr/local/python/run.sh <span class="token operator">></span> /tmp/jiang.log 2<span class="token operator">></span><span class="token operator">&amp;</span>1 <span class="token operator">&amp;</span></code></pre>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/persion\日常记录.assets\image-20220418161417690.png" alt="image-20220418161417690" loading="lazy"></p>
<h3 id="9、开发工具的使用"><a href="#9、开发工具的使用" class="headerlink" title="9、开发工具的使用"></a>9、开发工具的使用</h3><h4 id="1、IDEA"><a href="#1、IDEA" class="headerlink" title="1、IDEA"></a>1、IDEA</h4><blockquote>
<p>  解决终端的中文乱码问题</p>
</blockquote>
<p>在设置中添加上<code>LESSCHARSET=utf-8</code></p>
<p><img src="/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/098a822f-a2f2-48a0-bcc3-00e393958c9d.png" alt="img" loading="lazy"></p>
<blockquote>
<p>  代码对齐快捷键</p>
</blockquote>
<p><code>Ctrl+Alt+L</code></p>
<h4 id="2、VsCode"><a href="#2、VsCode" class="headerlink" title="2、VsCode"></a>2、VsCode</h4><blockquote>
<p>  多行编辑</p>
</blockquote>
<ol>
<li>Alt+鼠标左键（跨行需要每行单点）</li>
<li>Alt+shift+鼠标拖动选中</li>
<li>光标选中元素 Ctrl+d</li>
</ol>
<blockquote>
<p>自动对齐</p>
</blockquote>
<p>Shift + Alt + F</p>
<h3 id="10、Python笔记"><a href="#10、Python笔记" class="headerlink" title="10、Python笔记"></a>10、Python笔记</h3><h4 id="1、图片转成Base64"><a href="#1、图片转成Base64" class="headerlink" title="1、图片转成Base64"></a>1、图片转成Base64</h4><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> base64

<span class="token comment" spellcheck="true"># 读取图片数据，使用Base64编码</span>
<span class="token keyword">with</span> open<span class="token punctuation">(</span>image_path<span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    image <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    image_base64 <span class="token operator">=</span> str<span class="token punctuation">(</span>base64<span class="token punctuation">.</span>b64encode<span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span></code></pre>
<h4 id="2、读取yml文件"><a href="#2、读取yml文件" class="headerlink" title="2、读取yml文件"></a>2、读取yml文件</h4><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> yaml

<span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">'./config.yml'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8-sig'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    file <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    data <span class="token operator">=</span> yaml<span class="token punctuation">.</span>load<span class="token punctuation">(</span>file<span class="token punctuation">,</span> Loader<span class="token operator">=</span>yaml<span class="token punctuation">.</span>FullLoader<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span></code></pre>
</div><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="打赏" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"></use></svg></span><div id="reward-comment">谢谢光临~</div><div id="qr" style="display:none;"><div style="display:inline-block"></div><div style="display:inline-block"></div><div style="display:inline-block"></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>晓江</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/" title="日常记录">https://lxjblog.gitee.io/2022/07/13/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> 许可协议。</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2022/07/28/Git%E6%9C%8D%E5%8A%A1%E5%99%A8/" rel="prev" title="Git 服务器"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">Git 服务器</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2022/07/10/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" rel="next" title="环境配置"><span class="post-nav-text">环境配置</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div id="comment"><div class="comment-tooltip text-center"><span>可以直接写评论内容喔~</span><br></div><div id="valine-container"></div><script src="https://cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script><script>function initValine() {
  const valineConfig = {"enable":true,"appId":"71BKFg13iJQvNsFNLGzHmK67-gzGzoHsz","appKey":"IiQx2mfEEjefvbUfSd66nBHd","placeholder":"留下你的评论呗","avatar":"robohash","pageSize":10,"visitor":false,"highlight":true,"recordIP":false,"enableQQ":true,"el":"#valine-container","lang":"zh-cn"}
  valineConfig.path = window.location.pathname
  new Valine(valineConfig)
}
setTimeout(initValine, 1000)</script></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2020 – 2023 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> 晓江</span></div><div class="live_time"><span>本博客已运行</span><span id="display_live_time"></span><span class="moe-text">(●'◡'●)</span><script>const a = 1;
function blog_live_time() {
  window.setTimeout(blog_live_time, 1000);
  const start = new Date('2020-08-04T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " 天 " + passHour + " 小时 " + passMinute + " 分 " + passSecond + " 秒";
}
blog_live_time();
</script></div><div id="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv" title="总访客量"><span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-user-line"></use></svg></span><span id="busuanzi_value_site_uv"></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv" title="总访问量"><span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-eye-line"></use></svg></span><span id="busuanzi_value_site_pv"></span></span></div></footer><a class="hty-icon-button" id="goUp" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="搜索"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search-line"></use></svg></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="/js/search/local-search.js" defer></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close-line"></use></svg></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="搜索..." value=""></div><div id="local-search-result"></div></div><script>let date = new Date();
let today = (date.getMonth() + 1) + "-" + date.getDate()
if ("4-4,9-18".indexOf(today) !== -1) {
  document.documentElement.style.filter = "grayscale(1)";
}</script><div class="aplayer no-destroy" id="aplayer" data-id="5157675042" data-server="netease" data-type="playlist" data-fixed="true" data-theme="#0078E7" data-loop="all" data-order="random" data-preload="auto" data-volume="0.7" data-mutex data-lrctype="1" data-listmaxheight="340px" data-storagename="metingjs"></div></div><script defer src="/js/utils.js"></script><script defer src="/js/hexo-theme-yun.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end --></body></html>